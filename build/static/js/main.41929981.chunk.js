(this.webpackJsonpeventtracker_react=this.webpackJsonpeventtracker_react||[]).push([[0],{47:function(e,t,a){},54:function(e,t,a){e.exports=a(92)},81:function(e,t,a){},83:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),l=a.n(c),o=a(1),i=a(13),s=a(49),m=a(50),d=a(12),u=a(2),v=a(7),b=a.n(v),f=function(e){return{type:"CREATE_MESSAGE",payload:e}},p=function(e){var t,a;return e.response?(t=e.response.data,a=e.response.status):(t={undefined_error:[e]},a="undefined_error"),{type:"GET_ERRORS",payload:{msg:t,status:a}}},E=function(){return function(e,t){var a=h(t);null!=a?(e({type:"USER_LOADING"}),b.a.get("https://eventtrackerapi.calculoengenharia.com.br/api/auth/login/",a).then((function(t){e({type:"USER_LOADED",payload:t.data}),e({type:"USER_NEW",payload:t.data.user})})).catch((function(t){e(p(t)),e({type:"AUTH_ERROR"})}))):e({type:"AUTH_ERROR"})}},y=function(){return function(e,t){var a=h(t);null!=a?b.a.post("https://eventtrackerapi.calculoengenharia.com.br/api/auth/logout/",null,a).then((function(t){e({type:"LOGOUT_SUCCESS"})})).catch((function(t){e(p(t))})):e({type:"AUTH_ERROR"})}},g=function(){return function(e,t){var a=h(t);null!=a?b.a.post("https://eventtrackerapi.calculoengenharia.com.br/api/auth/logoutall/",null,a).then((function(t){e({type:"LOGOUT_SUCCESS"})})).catch((function(t){e(p(t))})):e({type:"AUTH_ERROR"})}},h=function(e){var t=e().auth.token;if(null==t)return null;var a={headers:{"Content-Type":"application/json"}};return t&&(a.headers.Authorization="Token ".concat(t)),a},_=a(51),N=[],O=function e(t,a){var n=this;if(Object(_.a)(this,e),this.create=function(e){return function(t,a){b.a.post(n.url,e,h(a)).then((function(e){t({type:n.types.CREATE,payload:e.data}),t(f({CRUDcreate:"Criado com sucesso"}))})).catch((function(e){return t(p(e))}))}},this.read=function(e){return function(t,a){var r=Object.assign({},{params:e},h(a));b.a.get(n.url,r).then((function(e){t({type:n.types.READ,payload:e.data})})).catch((function(e){t(p(e))}))}},this.readOptions=function(){return function(e,t){b.a.options(n.url,h(t)).then((function(t){e({type:n.types.READ_OPTIONS,payload:t.data})})).catch((function(t){return e(p(t))}))}},this.update=function(e){return function(t,a){b.a.put(n.url+e.id+"/",Object(u.a)({},e),h(a)).then((function(e){t({type:n.types.UPDATE,payload:e.data}),t(f({CRUDupdate:"Atualizado com sucesso"}))})).catch((function(e){return t(p(e))}))}},this.delete=function(e){return function(t,a){b.a.delete(n.url+e+"/",h(a)).then((function(a){t({type:n.types.DELETE,payload:e}),t(f({CRUDdelete:"Deletado com sucesso"}))})).catch((function(e){return t(p(e))}))}},N.includes(t))throw new Error('nome: "'+t+'" j\xe1 existe, o nome deve ser unico.');N.push(t),this.nome=t,this.url=a,this.types={CREATE:"CREATE_"+this.nome.toUpperCase(),READ:"READ_"+this.nome.toUpperCase(),READ_OPTIONS:"READ_OPTIONS"+this.nome.toUpperCase(),UPDATE:"UPDATE_"+this.nome.toUpperCase(),DELETE:"DELETE_"+this.nome.toUpperCase()}},j=a(8),w=a.n(j),D=new O("notice","https://eventtrackerapi.calculoengenharia.com.br/api/notice/"),S={notices:[]},A=new O("noticecolor","https://eventtrackerapi.calculoengenharia.com.br/api/noticecolor/"),k={notice_colors:[]},C=new O("noticeeventtype","https://eventtrackerapi.calculoengenharia.com.br/api/noticeeventtype/"),x={notice_event_types:[]},M=Object(i.combineReducers)({notices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.types.CREATE:return Object(u.a)(Object(u.a)({},e),{},{notices:[].concat(Object(d.a)(e.notices),[t.payload])});case D.types.READ:return Object(u.a)(Object(u.a)({},e),{},{notices:t.payload});case D.types.UPDATE:return Object(u.a)(Object(u.a)({},e),{},{notices:e.notices.map((function(e){return e.id===t.payload.id?t.payload:e}))});case D.types.DELETE:return Object(u.a)(Object(u.a)({},e),{},{notices:e.notices.filter((function(e){return e.id!==t.payload}))});case"NOTICE_GETLATEST":return null===t.payload.imovel_id||e.notices.find((function(e){return e.id===t.payload.id}))?e:Object(u.a)(Object(u.a)({},e),{},{notices:[].concat(Object(d.a)(e.notices),[t.payload])});default:return e}},notice_event_types:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.types.CREATE:return Object(u.a)(Object(u.a)({},e),{},{notice_event_types:[].concat(Object(d.a)(e.notice_event_types),[t.payload])});case C.types.READ:return Object(u.a)(Object(u.a)({},e),{},{notice_event_types:t.payload});case C.types.UPDATE:return Object(u.a)(Object(u.a)({},e),{},{notice_event_types:e.notice_event_types.map((function(e){return e.id===t.payload.id?t.payload:e}))});case C.types.DELETE:return Object(u.a)(Object(u.a)({},e),{},{notice_event_types:e.notice_event_types.filter((function(e){return e.id!==t.payload}))});default:return e}},notice_colors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.types.CREATE:return Object(u.a)(Object(u.a)({},e),{},{notice_colors:[].concat(Object(d.a)(e.notice_colors),[t.payload])});case A.types.READ:return Object(u.a)(Object(u.a)({},e),{},{notice_colors:t.payload});case A.types.UPDATE:return Object(u.a)(Object(u.a)({},e),{},{notice_colors:e.notice_colors.map((function(e){return e.id===t.payload.id?t.payload:e}))});case A.types.DELETE:return Object(u.a)(Object(u.a)({},e),{},{notice_colors:e.notice_colors.filter((function(e){return e.id!==t.payload}))});default:return e}}}),T=new O("survey","https://eventtrackerapi.calculoengenharia.com.br/api/survey/"),Y={surveys:[]},R=new O("surveyeventtype","https://eventtrackerapi.calculoengenharia.com.br/api/surveyeventtype/"),L={survey_event_types:[]},U=Object(i.combineReducers)({surveys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.types.CREATE:return Object(u.a)(Object(u.a)({},e),{},{surveys:[].concat(Object(d.a)(e.surveys),[t.payload])});case T.types.READ:return Object(u.a)(Object(u.a)({},e),{},{surveys:t.payload});case T.types.UPDATE:return Object(u.a)(Object(u.a)({},e),{},{surveys:e.surveys.map((function(e){return e.id===t.payload.id?t.payload:e}))});case T.types.DELETE:return Object(u.a)(Object(u.a)({},e),{},{surveys:e.surveys.filter((function(e){return e.id!==t.payload}))});default:return e}},survey_event_types:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.types.CREATE:return Object(u.a)(Object(u.a)({},e),{},{survey_event_types:[].concat(Object(d.a)(e.survey_event_types),[t.payload])});case R.types.READ:return Object(u.a)(Object(u.a)({},e),{},{survey_event_types:t.payload});case R.types.UPDATE:return Object(u.a)(Object(u.a)({},e),{},{survey_event_types:e.survey_event_types.map((function(e){return e.id===t.payload.id?t.payload:e}))});case R.types.DELETE:return Object(u.a)(Object(u.a)({},e),{},{survey_event_types:e.survey_event_types.filter((function(e){return e.id!==t.payload}))});default:return e}}}),I=new O("activity","https://eventtrackerapi.calculoengenharia.com.br/api/activity/"),V={activitys:[]},P=Object(i.combineReducers)({activitys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.types.CREATE:return Object(u.a)(Object(u.a)({},e),{},{activitys:[].concat(Object(d.a)(e.activitys),[t.payload])});case I.types.READ:return Object(u.a)(Object(u.a)({},e),{},{activitys:t.payload});case I.types.UPDATE:return Object(u.a)(Object(u.a)({},e),{},{activitys:e.activitys.map((function(e){return e.id===t.payload.id?t.payload:e}))});case I.types.DELETE:return Object(u.a)(Object(u.a)({},e),{},{activitys:e.activitys.filter((function(e){return e.id!==t.payload}))});default:return e}}}),F=new O("imovel","https://eventtrackerapi.calculoengenharia.com.br/api/imovel/"),z=function(){return function(e,t){b.a.get("https://eventtrackerapi.calculoengenharia.com.br/api/imovelupdatelog/",h(t)).then((function(t){e({type:"IMOVEL_UPDATELOG",payload:t.data})})).catch((function(t){"ECONNABORTED"===!t.code&&e(p(t))}))}},B={imoveis:[]},q={},G=Object(i.combineReducers)({imoveis:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F.types.CREATE:return Object(u.a)(Object(u.a)({},e),{},{imoveis:[].concat(Object(d.a)(e.imoveis),[t.payload])});case F.types.READ:return Object(u.a)(Object(u.a)({},e),{},{imoveis:t.payload.results});case F.types.UPDATE:return Object(u.a)(Object(u.a)({},e),{},{imoveis:e.imoveis.map((function(e){return e.id===t.payload.id?t.payload:e}))});case F.types.DELETE:return Object(u.a)(Object(u.a)({},e),{},{imoveis:e.imoveis.filter((function(e){return e.id!==t.payload}))});default:return e}},updatelog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IMOVEL_UPDATELOG":return Object(u.a)({},t.payload);default:return e}}}),H=new O("user","https://eventtrackerapi.calculoengenharia.com.br/api/user/"),J={users:[],current:{}},W=new O("userprofile","https://eventtrackerapi.calculoengenharia.com.br/api/userprofile/"),$={users:[]},K=Object(i.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.types.CREATE:return Object(u.a)(Object(u.a)({},e),{},{users:[].concat(Object(d.a)(e.users),[t.payload])});case H.types.READ:return Object(u.a)(Object(u.a)({},e),{},{users:t.payload});case H.types.UPDATE:return Object(u.a)(Object(u.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload.id?t.payload:e}))});case H.types.DELETE:return Object(u.a)(Object(u.a)({},e),{},{users:e.users.filter((function(e){return e.id!==t.payload}))});case"USER_NEW":return Object(u.a)(Object(u.a)({},e),{},{current:t.payload});default:return e}},userprofiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.types.CREATE:return Object(u.a)(Object(u.a)({},e),{},{users:[].concat(Object(d.a)(e.users),[t.payload])});case W.types.READ:return Object(u.a)(Object(u.a)({},e),{},{users:t.payload});case W.types.UPDATE:return Object(u.a)(Object(u.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload.id?t.payload:e}))});case W.types.DELETE:return Object(u.a)(Object(u.a)({},e),{},{users:e.users.filter((function(e){return e.id!==t.payload}))});default:return e}}}),Q={token:localStorage.getItem("token"),isAuthenticated:null,user:null,isLoading:null},X={msg:{},status:null},Z={},ee=Object(i.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0});case"USER_LOADED":return Object(u.a)(Object(u.a)(Object(u.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case"UPDATE_USERPROFILE":return Object(u.a)(Object(u.a)({},e),{},{user:e.user.id===t.payload.id?t.payload:e.user,isAuthenticated:!0,isLoading:!1});case"LOGIN_SUCCESS":return localStorage.removeItem("token"),localStorage.setItem("token",t.payload.token),Object(u.a)(Object(u.a)(Object(u.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":return localStorage.removeItem("token"),Object(u.a)(Object(u.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}},user:K,notice:M,survey:U,activity:P,errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{msg:t.payload.msg,status:t.payload.status};default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MESSAGE":return t.payload;default:return e}},date:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATE_NEW":return t.payload;default:return e}},imovel:G}),te=[m.a],ae=Object(i.createStore)(ee,{},Object(s.composeWithDevTools)(i.applyMiddleware.apply(void 0,te))),ne=(a(81),["api/imovelupdatelog/","api/imovel/"]);b.a.interceptors.request.use((function(e){return ne.includes(e.url.replace("https://eventtrackerapi.calculoengenharia.com.br/",""))||document.body.classList.add("loading-indicator"),e}),(function(e){return document.body.classList.remove("loading-indicator"),Promise.reject(e)})),b.a.interceptors.response.use((function(e){return document.body.classList.remove("loading-indicator"),e}),(function(e){return document.body.classList.remove("loading-indicator"),Promise.reject(e)}));var re=a(30),ce=a(14),le=a(11),oe=a(18),ie=function(){return r.a.createElement("div",{className:"w-100 h-100 d-grid justify-content-center align-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"}))},se=function(e){var t=e.component,a=Object(oe.a)(e,["component"]),n=Object(o.c)((function(e){return e.auth}));return r.a.createElement(le.b,Object.assign({},a,{render:function(e){return n.isLoading||null==n.isAuthenticated?r.a.createElement(ie,null):n.isAuthenticated?r.a.createElement(t,e):r.a.createElement(le.a,{to:"/login"})}}))},me=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"404 - Pagina n\xe3o encontrada!"),r.a.createElement(ce.b,{to:"/"},"Ir para pagina inicial"))},de=(a(83),function(e){var t=e.to,a=e.children;return r.a.createElement(le.b,{exact:!0,path:t,children:function(e){var n=e.match;return r.a.createElement("li",{className:n?"nav-item active":"nav-item"},r.a.createElement(ce.c,{activeClassName:"active",className:"nav-link","aria-current":"page",to:t},a))}})}),ue=function(){var e,t=Object(o.c)((function(e){return e.auth}));return e=t.isAuthenticated?r.a.createElement(ce.c,{to:"/login",activeClassName:"d-none",className:"btn btn-outline-primary"},"Sair"):r.a.createElement(ce.c,{to:"/login",activeClassName:"d-none",className:"btn btn-outline-primary"},"entrar"),r.a.createElement("nav",{className:"navbar navbar-dark bg-dark navbar-expand-lg p-2"},r.a.createElement("img",{style:{height:"35px"},className:"d-none d-xl-inline-block mr-2",alt:"",src:"/Logo.png"}),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("span",{className:"navbar-brand",href:"/",disabled:"disabled"},t.user?"AFM "+t.user.first_name+" "+t.user.last_name:"Event Tracker"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto mb-2 mb-lg-0"},r.a.createElement(de,{to:"/perfil"},"Perfil"),r.a.createElement(de,{to:"/"},"Calendario"),r.a.createElement(de,{to:"/tarefas"},"Tarefas do Dia"),r.a.createElement(de,{to:"/aconcluir"},"A Concluir"),r.a.createElement(de,{to:"/busca"},"Buscar"),r.a.createElement(de,{to:"/incompativel"},"Verifica\xe7\xe3o de im\xf3vel"),t&&t.user&&t.user.is_staff&&r.a.createElement(de,{to:"/admin"},"Administra\xe7\xe3o")),e)))},ve=function(){return r.a.createElement("footer",{className:"container-fluid bg-light"},r.a.createElement("span",{className:"text-muted"},"\xa92020 Jonas Martins"))};function be(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e}),[e]),t.current}var fe=function(e,t){var a=Object(o.c)((function(e){return e})),c=a.errors,l=a.messages,i=be(c),s=be(l),m=Object(re.b)(),d=Object(le.g)();return Object(n.useEffect)((function(){c!==i&&(c.msg.username&&m.error("Usu\xe1rio: ".concat(c.msg.username.join())),c.msg.password&&m.error("Senha: ".concat(c.msg.password.join())),c.msg.non_field_errors&&m.error(c.msg.non_field_errors.join()),c.msg.detail&&m.error(c.msg.detail),c.msg.undefined_error&&m.error(c.msg.undefined_error.join()),c.status>=300&&(c.msg||m.error(c.status))),l!==s&&(l.CRUDcreate&&m.success(l.CRUDcreate),l.CRUDread&&m.success(l.CRUDread),l.CRUDupdate&&m.success(l.CRUDupdate),l.CRUDdelete&&m.success(l.CRUDdelete),l.ERROR&&m.error(l.ERROR),l.INFO&&m.info(l.INFO),l.SUCCESS&&m.success(l.SUCCESS))}),[c,i,l,s,m,d]),r.a.createElement(n.Fragment,null)},pe=function(e){var t=e.style,a=e.options,n=e.message,c=e.close,l="";return"info"===a.type?l="alert-info":"success"===a.type?l="alert-success":"error"===a.type&&(l="alert-danger"),r.a.createElement("div",{className:"alert alert-dismissible fade show "+l,role:"alert",style:t},n,r.a.createElement("button",{className:"close",onClick:c},r.a.createElement("span",null,"\xd7")))},Ee=a(5),ye=a.n(Ee),ge=a(3);a(46),a(85);var he=function(e){var t=e.toString().match(/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/g),a=e.toString().match(/^\d{4}-(0[1-9]|1[012])$/g);if(null!==t){var n=t[0].split("-");return new Date(n[0],n[1]-1,n[2])}if(null!==a){var r=a[0].split("-");return new Date(r[0],r[1]-1)}return new Date},_e=function(e){if(e)return ae.getState().notice.notice_colors.notice_colors.find((function(t){return t.css_name===e.css_name}))},Ne=function(e){if(e)return ae.getState().notice.notice_event_types.notice_event_types.find((function(t){return t.id===e.notice_event_type}))},Oe=function(e){for(var t=0;t<e.notice_events.length;t++)if(!e.notice_events[t].concluded)return!1;return!0},je=function(e){if(e)return ae.getState().survey.survey_event_types.survey_event_types.find((function(t){return t.id===e.survey_event_type}))},we=function(e){return window.history.pushState(null,null,"#"+e.format("YYYY-MM-DD")),{type:"DATE_NEW",payload:e}},De=function(e){var t=e.momentdate,a=Object(o.b)();return r.a.createElement("caption",{className:"bg-primary text-center"},r.a.createElement("div",{className:"float-left ml-2"},r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{className:"btn btn-secondary border-right",onClick:function(){a(we(ye()(t.clone().subtract(1,"months").startOf("month"))))}},r.a.createElement("i",{className:"fa fa-chevron-left"})),r.a.createElement("button",{className:"btn btn-secondary border-left",onClick:function(){a(we(ye()(t.clone().add(1,"months").startOf("month"))))}},r.a.createElement("i",{className:"fa fa-chevron-right"}))),r.a.createElement("button",{className:"btn btn-secondary mx-2",onClick:function(){a(we(ye()()))}},"Hoje")),r.a.createElement("h4",{className:"text-uppercase font-weight-bold"},t.format("MMMM Y")))},Se=(a(86),function(e){var t=e.icon,a=e.href,n=void 0===a?null:a,c=e.onclick,l=void 0===c?null:c,o=e.title;return r.a.createElement("div",{className:"col col-auto p-0 d-flex flex-column justify-content-center"},r.a.createElement("a",{href:n,onClick:l,target:"_blank",rel:"noreferrer noopener",className:"btn btn-secondary d-flex justify-content-center align-content-between p-1 mr-1 float-right",type:"button",title:o},r.a.createElement("i",{className:"fa "+t})))}),Ae=function(e){var t=e.concluded,a=e.onclick;return r.a.createElement(Se,{icon:t?"fa-check-square-o":"fa-square-o",onclick:a,title:"Marcar como finalizado"})},ke=function(e){var t=e.address;return r.a.createElement(Se,{href:"https://www.google.com/maps/place/"+t,icon:"fa-map",title:"Procurar endere\xe7o no GMaps"})},Ce=function(e){var t=e.codigo_lote;return r.a.createElement(Se,{href:"https://geoitajai.github.io/geo/consultazoneamento_openlayers.html#"+t,icon:"fa-file-text-o",title:"Abrir no GeoItaja\xed"})},xe=function(e){var t=e.notice_id,a=void 0===t?"0":t,n=e.survey_id,c=void 0===n?"0":n,l=e.activity_id,o=void 0===l?"0":l,i=e.modalcall,s=void 0===i?"none":i,m=e.title,d=void 0===m?"":m,u=e.day,v=void 0===u?ye()().format("YYYY-MM-DD"):u,b=e.children;return r.a.createElement("div",{className:"col p-1 text-truncate d-flex flex-column justify-content-center",role:"button",title:d,"data-bs-toggle":"modal","data-bs-target":"#ModalEvent","data-modalcall":s,"data-notice_id":a,"data-survey_id":c,"data-activity_id":o,"data-day":v},b)},Me=function(e){var t=e.notice_event,a=e.day,n=Ne(t);return t&&a&&n&&(t.date===a.format("YYYY-MM-DD")&&n.show_start||t.deadline_date===a.format("YYYY-MM-DD"))?r.a.createElement("span",{className:"row no-gutters py-1 text-truncate d-inline-block font-weight-bold"},"A. "+n.short_name+": ",null!==t.identification&&t.identification):null},Te=function(e){var t=e.notice,a=e.day;return r.a.createElement("div",{style:{backgroundColor:_e(t)?_e(t).css_color:"red"},className:"row no-gutters event user-select-none text-truncate"+(Oe(t)?" concluded":"")},r.a.createElement(xe,{notice_id:t.id,modalcall:"notice",title:t.imovel?t.imovel.name_string:"",day:a.format("YYYY-MM-DD")},t.notice_events.filter((function(e){return e.date===a.format("YYYY-MM-DD")})).map((function(e,t){return r.a.createElement(Me,{key:e.id,notice_event:e,day:a})}))),r.a.createElement(Ce,{codigo_lote:t.imovel?t.imovel.codigo_lote:""}),r.a.createElement(ke,{address:t.imovel?t.imovel.logradouro+","+t.imovel.numero+"-"+t.imovel.bairro+"-itaja\xed":""}))},Ye=function(e){var t=e.notice,a=e.day,c=Object(o.b)(),l=Object(o.c)((function(e){return e.auth.user})),i=Object(n.useState)(!1),s=Object(ge.a)(i,2),m=s[0],d=s[1];Object(n.useEffect)((function(){d(void 0!==l&&void 0!==t?l.id===t.owner:void 0!==l)}),[l,t]);return t.notice_events.filter((function(e){return e.deadline_date===a.format("YYYY-MM-DD")})).map((function(e){var n=Ne(e);return n&&n.show_deadline?e.deadline_date===a.format("YYYY-MM-DD")&&r.a.createElement("div",{key:e.id,style:{backgroundColor:Ne(e)?Ne(e).css_color:"blue"},className:"row no-gutters event user-select-none text-truncate"+(e.concluded?" concluded":"")},r.a.createElement(xe,{notice_id:t.id,modalcall:"notice",title:t.imovel?t.imovel.name_string:"",day:a.format("YYYY-MM-DD")},r.a.createElement(Me,{notice_event:e,day:a})),r.a.createElement(Ae,{concluded:e.concluded,onclick:m?function(){return function(e){e.concluded=!e.concluded,c(D.update(t))}(e)}:function(){}}),r.a.createElement(Ce,{codigo_lote:t.imovel?t.imovel.codigo_lote:""}),r.a.createElement(ke,{address:t.imovel?t.imovel.logradouro+","+t.imovel.numero+"-"+t.imovel.bairro+"-itaja\xed":""})):null}))},Re=function(e){var t=e.survey,a=je(t);return t&&a?r.a.createElement("span",{className:"row no-gutters py-1 text-truncate d-inline-block font-weight-bold"},"V. "+a.short_name+": ",null!==t.identification&&t.identification):null},Le=function(e){var t=e.survey,a=e.day,c=je(t),l=Object(o.b)(),i=Object(o.c)((function(e){return e.auth.user})),s=Object(n.useState)(!1),m=Object(ge.a)(s,2),d=m[0],u=m[1];Object(n.useEffect)((function(){u(void 0!==i&&void 0!==t?i.id===t.owner:void 0!==i)}),[i,t]);return r.a.createElement("div",{style:{backgroundColor:c?c.css_color:"green"},className:"row no-gutters event user-select-none text-truncate "+(t.concluded?" concluded":"")},r.a.createElement(xe,{survey_id:t.id,modalcall:"survey",title:t.imovel?t.imovel.name_string:"",day:a.format("YYYY-MM-DD")},r.a.createElement(Re,{survey:t})),r.a.createElement(Ae,{concluded:t.concluded,onclick:d?function(){return t.concluded=!t.concluded,void l(T.update(t))}:function(){}}),r.a.createElement(Ce,{codigo_lote:t.imovel?t.imovel.codigo_lote:""}),r.a.createElement(ke,{address:t.imovel?t.imovel.logradouro+","+t.imovel.numero+"-"+t.imovel.bairro+"-itaja\xed":""}))},Ue=function(e){var t=e.survey,a=e.day;return r.a.createElement(Le,{survey:t,day:a})},Ie=function(e){var t=e.day,a=e.momentdate,c=Object(o.c)((function(e){return e.user.users.current})),l=Object(o.c)((function(e){return e.notice.notices.notices.filter((function(e){return e.owner===c.id})).filter((a=t.format("YYYY-MM-DD"),function(e){for(var t=0;t<e.notice_events.length;t++)if(e.notice_events[t].date===a)return!0;return!1}));var a})),i=Object(o.c)((function(e){return e.notice.notices.notices.filter((function(e){return e.owner===c.id})).filter((a=t.format("YYYY-MM-DD"),function(e){for(var t=0;t<e.notice_events.length;t++)if(e.notice_events[t].deadline_date===a)return!0;return!1}));var a})),s=Object(o.c)((function(e){return e.survey.surveys.surveys.filter((function(e){return e.owner===c.id})).filter((a=t.format("YYYY-MM-DD"),function(e){return e.date===a}));var a})),m=Object(o.c)((function(e){return e.activity.activitys.activitys.filter((function(e){return e.owner===c.id})).find((a=t.format("YYYY-MM-DD"),function(e){return e.date===a}));var a})),d=Object(o.c)((function(e){return e.auth.user})),u=Object(n.useState)(!1),v=Object(ge.a)(u,2),b=v[0],f=v[1];return Object(n.useEffect)((function(){f(void 0!==d&&void 0!==m?d.id===m.owner:void 0!==d)}),[d,m]),a.isSame(t,"month")?r.a.createElement("td",{id:t.format("YYYY-MM-DD"),className:""},r.a.createElement("div",{className:"text-right pb-1"},r.a.createElement("button",{className:"btn btn-circle"+(m?" btn-primary":" btn-secondary"),"data-bs-toggle":"modal","data-bs-target":"#ModalEvent","data-modalcall":b?void 0!==m?"activity":"none":"activity","data-notice_id":"0","data-survey_id":"0","data-activity_id":void 0!==m?m.id:"0","data-day":t.format("YYYY-MM-DD"),disabled:void 0!==m||d.id===c.id?"":"disabled"},t.format("DD").toString())),l.map((function(e){return r.a.createElement(Te,{key:e.id,notice:e,day:t})})),i.map((function(e){return r.a.createElement(Ye,{key:e.id,notice:e,day:t})})),s.map((function(e){return r.a.createElement(Ue,{key:e.id,survey:e,day:t})}))):r.a.createElement("td",{id:t.format("YYYY-MM-DD"),className:"opacity-4"},r.a.createElement("div",{className:"text-right pb-1"},r.a.createElement("button",{className:"btn btn-circle btn-secondary disabled"},t.format("DD").toString())))},Ve=function(e){var t=e.momentdate,a=Object(n.useState)([]),c=Object(ge.a)(a,2),l=c[0],i=c[1],s=Object(o.b)();return Object(n.useEffect)((function(){ye.a.locale("pt-br"),s(H.read()),s(C.read()),s(A.read()),s(R.read());var e={start_date:t.clone().startOf("month").startOf("week").format("YYYY-MM-DD"),end_date:t.clone().endOf("month").endOf("week").format("YYYY-MM-DD")};s(D.read(e)),s(T.read(e)),s(I.read(e)),i(function(e){for(var t=[],a=e.clone().startOf("month").startOf("week"),n=e.clone().endOf("month").endOf("week"),r=a.clone().subtract(1,"day");r.isBefore(n,"day");)t.push(Array(7).fill(0).map((function(){return r.add(1,"day").clone()})));return t}(t))}),[s,t]),r.a.createElement("section",null,r.a.createElement("table",{id:"calendar",className:"table table-light table-bordered"},r.a.createElement(De,{momentdate:t}),r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",{className:"text-center text-uppercase"},ye.a.weekdays().map((function(e,t){return r.a.createElement("th",{key:"week"+t,className:"weekdays "},e)})))),r.a.createElement("tbody",null,l.map((function(e,a){return r.a.createElement("tr",{key:"week"+a},e.map((function(e){return r.a.createElement(Ie,{key:e.format("YYYY-MM-DD"),day:e,momentdate:t},e.format("D").toString())})))})))))},Pe=a(4),Fe=a(52),ze=a(36),Be=function(e){return e?void 0:"Campo obrigat\xf3rio"},qe=function(e){var t=e.name;return r.a.createElement(Pe.a,{name:t,subscription:{error:!0,touched:!0}},(function(e){var t=e.meta,a=t.error,n=t.touched;return a&&n?r.a.createElement("div",{className:"invalid-feedback d-block"},a.toString()):null}))},Ge=function(e){var t=e.isHidden,a=void 0!==t&&t,n=Object(oe.a)(e,["isHidden"]),c="form-control form-control-sm";void 0!==n.className&&(c+=" "+n.className,delete n.className);var l="form-group mb-0";return void 0!==n.classNameDiv&&(l+=" "+n.classNameDiv,delete n.classNameDiv),r.a.createElement("div",{className:a?"d-none":l},n.label&&r.a.createElement("label",{htmlFor:"id_"+n.name,className:"mb-0"},n.label),r.a.createElement(Pe.a,Object.assign({component:"input",type:"text"},n,{className:c,id:"id_"+n.name,name:n.name})),r.a.createElement(qe,{name:n.name}))},He=function(e){var t=e.isHidden,a=void 0!==t&&t,n=Object(oe.a)(e,["isHidden"]),c="custom-control-input";void 0!==n.className&&(c+=" "+n.className,delete n.className);var l="custom-control custom-checkbox";return void 0!==n.classNameDiv&&(l+=" "+n.classNameDiv,delete n.classNameDiv),r.a.createElement("div",{className:a?"d-none":l,title:n.tooltip},r.a.createElement(Pe.a,Object.assign({component:"input",type:"checkbox"},n,{id:"id_"+n.name,name:n.name,className:c})),n.label&&r.a.createElement("label",{className:"custom-control-label",htmlFor:"id_"+n.name},n.label),r.a.createElement(qe,{name:n.name}))},Je=function(e){var t=e.isHidden,a=void 0!==t&&t,n=Object(oe.a)(e,["isHidden"]),c="form-control form-control-sm";void 0!==n.className&&(c+=" "+n.className);var l="form-group mb-0";return void 0!==n.classNameDiv&&(l+=" "+n.classNameDiv,delete n.classNameDiv),r.a.createElement("div",{className:a?"d-none":l},n.label&&r.a.createElement("label",{htmlFor:"id_"+n.name,className:"mb-0"},n.label),r.a.createElement(Pe.a,Object.assign({component:"select"},n,{className:c,id:"id_"+n.name,name:n.name})),r.a.createElement(qe,{name:n.name}))},We=function(e){var t=e.isDisabled,a=void 0!==t&&t,n=Object(oe.a)(e,["isDisabled"]);return a?r.a.createElement("fieldset",{disabled:!0},n.children):r.a.createElement("fieldset",null,n.children)},$e=function(e){var t=e.isDisabled,a=void 0!==t&&t,n=e.canDelete,c=void 0!==n&&n,l=e.canCopy,o=void 0!==l&&l,i=e.onDelete,s=e.form;return r.a.createElement("div",{className:"modal-footer"},c&&r.a.createElement("button",{type:"button",className:"mr-auto btn btn-danger font-weight-bold",onClick:i,disabled:a},"Deletar"),s&&r.a.createElement("button",{type:"button",className:"btn btn-secondary font-weight-bold",onClick:function(){s.reset()},title:"Recarregar informa\xe7\xf5es iniciais",disabled:a},r.a.createElement("i",{className:"fa fa-refresh"})),r.a.createElement("button",{type:"button",className:"btn btn-secondary font-weight-bold","data-bs-dismiss":"modal"},"Fechar"),r.a.createElement("button",{type:"submit",className:"btn btn-primary font-weight-bold",disabled:a},"Salvar"),o&&r.a.createElement(He,{name:"criarnovo",label:"Criar novo",tooltip:"Salva como um novo evento",disabled:a}))},Ke=(a(87),a(10)),Qe=a(23),Xe=a(53),Ze=a.n(Xe),et=function(e){var t=e.name,a=e.name_string,c=e.label,l=e.form,i=e.className,s=e.showResult,m=void 0===s||s,d=Object(oe.a)(e,["name","name_string","label","form","className","showResult"]),u=Object(o.b)(),v=Object(o.c)((function(e){return e.imovel.imoveis.imoveis})),p=Object(n.useState)(),E=Object(ge.a)(p,2),y=E[0],g=E[1],h=Object(n.useState)(!1),_=Object(ge.a)(h,2),N=_[0],O=_[1],j=Object(n.useState)(null),w=Object(ge.a)(j,2),D=w[0],S=w[1],A=Object(n.useState)(!1),k=Object(ge.a)(A,2),C=k[0],x=k[1],M=Object(n.useState)(""),T=Object(ge.a)(M,2),Y=T[0],R=T[1],L=Object(n.useState)(),U=Object(ge.a)(L,2),I=U[0],V=U[1];Object(n.useEffect)((function(){g(l.getFieldState(t).value),l.getFieldState(a).pristine&&O(!1)}),[l,t,a]);var P=Object(n.useCallback)(Ze()((function(e){if(l.getFieldState(t).value){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=/^[\d.]+-(.+)$/g,n=/^[\d.]+$/g,r="",c="",l="",o="",i="",s="";if(a.test(e)){var m=e.indexOf("-");i=e.slice(0,m).trim(),o=e.slice(m+1).trim()}else n.test(e)?i=e:o=e;if(i&&(i=i.replace(/\D/g,""),s=Object(Ke.a)("999.999.99.9999.9999.999",i)),o){var d=o.lastIndexOf("-");d>0&&(r=o.slice(d+1).trim(),o=o.slice(0,d).trim());var u=o.indexOf(",");if(u>0){var v=(l=o.slice(u+1)).indexOf(",");v>0&&(c=l.slice(v+1).trim(),l=l.slice(0,v)),l=l.includes("s/n")?l.trim():l.replace(/[nN]|[\xba\xb0]/g,"").trim(),o=o.slice(0,u).trim()}}return{id:t,bairro:r,complemento:c,number:l,street:o,codigo:i,inscricao_imobiliaria:s}}(e,l.getFieldState(t).value.id);u(F.read(a))}}),500),[]),z=function(e){e&&void 0!==l.getFieldState(a).value&&l.getFieldState(a).value.length>3?(clearTimeout(D),O(!0)):S(setTimeout((function(){O(!1)}),100))},B=function(e){z(!1),x(!1),v&&(l.mutators.setValue(t,v.find((function(t){return t.id.toString()===e.target.dataset.imovel_id}))),l.mutators.setValue(t+"_id",e.target.dataset.imovel_id))};return void 0!==i?i+=" form-control form-control-sm":i="form-control form-control-sm",r.a.createElement("div",{className:"form-group mb-0"},c&&r.a.createElement("label",{htmlFor:"id_"+t,className:"mb-0"},c," ",r.a.createElement("i",{className:"fa fa-question fa-sm","aria-hidden":"true",title:'Digite o codigo do imovel, insc. imobili\xe1ria, ou endere\xe7o \r ex.: \r endere\xe7o: "logradouro,numero,complemento-bairro" \r codigo do im\xf3vel: "123456" \r insc. imobili\xe1ria (com ou sem pontos): "123.456..." \r Ap\xf3s terminar de digitar espere por meio segundo para a pesquisar ser realizada'})),r.a.createElement("div",{className:"autocomplete"},r.a.createElement(Pe.a,Object.assign({component:"input",type:"text"},d,{className:i,id:"id_"+a,name:a,autoComplete:"off"})),r.a.createElement(Qe.b,{name:"imovel.name_string"},(function(e,a){!function(e,a){e.length>3?(P(e),z(!0)):z(!1),0===e.length&&l.mutators.setValue(t,null)}(e)})),r.a.createElement(Qe.c,{name:"imovel.name_string"},(function(){z(!0)})),r.a.createElement(Qe.a,{name:"imovel.name_string"},(function(){z(!1)})),r.a.createElement(Pe.a,{component:"input",type:"hidden",id:"id_"+t,name:t}),r.a.createElement("div",{className:N?"autocomplete-items":"d-none"},v&&v.map((function(e,t){return r.a.createElement("div",{key:t,"data-imovel_id":e.id,"data-imovel_value":e.name_string,onClick:B,className:y&&e.name_string===y.name_string?"autocomplete-active":""},e.name_string)})))),r.a.createElement(qe,{name:a}),m&&y&&r.a.createElement("ul",{className:"list-group p-1 m-2 autocomplete-resultlist border"},r.a.createElement("li",{className:"list-group-item p-0 border-0"},"razao_social: ",y.razao_social),r.a.createElement("li",{className:"list-group-item p-0 border-0"},"C\xf3digo do im\xf3vel: ",y.codigo),r.a.createElement("li",{className:"list-group-item p-0 border-0"},"Insc. Imobili\xe1ria: ",y.inscricao_imobiliaria),r.a.createElement("li",{className:"list-group-item p-0 border-0"},"Contribuinte: ",y.numero_contribuinte),r.a.createElement("li",{className:"list-group-item p-0 border-0"},"Endere\xe7o: ",y.logradouro+", "+y.numero,y.complemento?", "+y.complemento:""," - ","Bairro: ",y.bairro," - ","CEP:"," ",y.cep&&Object(Ke.a)("99.999-999",y.cep),r.a.createElement("div",{className:"row no-gutters d-inline-flex float-right"},r.a.createElement(Se,{icon:C?"fa-envelope-open-o":"fa-envelope-o",onclick:function(){R(y.logradouro),V(),x(!C),l.mutators.setValue("newCEP",Object(Ke.a)("99.999-999",y.cep))},title:"Autalizar CEP"}),r.a.createElement(Ce,{codigo_lote:y.codigo_lote}),r.a.createElement(ke,{address:y.logradouro+","+y.numero+"-"+y.bairro+"-itaja\xed"}))),r.a.createElement("li",{className:"list-group-item p-0 border-0"},r.a.createElement("div",{className:C?"collapse show p-1":"collapse"},r.a.createElement("div",{className:"card card-body d-block p-1"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm",maxLength:"255",value:Y,placeholder:"Logradouro sem n\xfamero e sem bairro",onChange:function(e){R(e.target.value)}}),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary btn-sm my-1",onClick:function(){!function(){var e={crossDomain:!0,headers:{"Content-Type":"application/json"},params:{uf:"SC",localidade:"Itajai",logradouro:Y}};b.a.get("https://eventtrackerapi.calculoengenharia.com.br/api/buscacep/",e).then((function(e){e.data.total>0?V(e.data.dados):u(f({INFO:e.data.mensagem}))})).catch((function(e){console.log(e)}))}()}},"Buscar CEP ",r.a.createElement("i",{className:"fa fa-search"})),r.a.createElement("div",{className:"list-group border-0"},I&&I.map((function(e,t){return r.a.createElement("button",{type:"button",className:"list-group-item list-group-item-action p-1 ",key:t,onClick:function(){l.mutators.setValue("newCEP",Object(Ke.a)("99.999-999",e.cep))}},r.a.createElement("span",null,e.logradouroDNEC," - ",e.bairro,": ",e.cep))}))),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"newCEP",label:"Novo CEP:",maxLength:"255",className:"m-1",classNameDiv:"mx-1",parse:Object(Ke.a)("99.999-999")}),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:function(){l.getFieldState("newCEP")&&(l.mutators.setValue(t+".cep",Object(Ke.a)("99.999-999",l.getFieldState("newCEP").value)),u(F.update(l.getFieldState(t).value))),x(!1)}},"Salvar CEP")))))))},tt=function(e){var t=e.fields,a=e.name,n=e.index,c=e.isOwner;return r.a.createElement("div",{key:a,className:"row px-4 py-1 form-inline"},r.a.createElement(Ge,{name:a+".identification",label:"N\xba:",size:"10",maxLength:"255",placeholder:"identifica\xe7\xe3o",className:"mx-1"}),r.a.createElement(Ge,{name:a+".date",label:"Data:",type:"date",className:"mx-1"}),c&&r.a.createElement("button",{type:"button",className:"btn btn-outline-danger border-0 btn-sm",onClick:function(){return t.remove(n)}},r.a.createElement("i",{className:"fa fa-trash fa-sm"})))},at=function(e){var t=e.fields,a=e.name,c=e.index,l=e.push,o=e.isOwner;return r.a.createElement("div",null,r.a.createElement("hr",{className:"m-1"}),r.a.createElement("div",{className:"row text-center"},r.a.createElement("span",{className:"col text-uppercase w-100 font-weight-bold text-nowrap inline-block"},Ne(t.value[c]).name),o&&r.a.createElement("button",{type:"button",className:"btn btn-outline-danger border-0",onClick:function(){return t.remove(c)}},r.a.createElement("i",{className:"fa fa-trash fa-lg"}))),void 0!==Ne(t.value[c])&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:a+"date",label:"Data:",type:"date",className:"mx-1",classNameDiv:"m-1",validate:Be}),r.a.createElement(Ge,{name:a+".identification",label:"N\xba:",type:"text",size:"15",maxLength:"255",placeholder:"identifica\xe7\xe3o",className:"mx-1",classNameDiv:"m-1"}),Ne(t.value[c]).show_report_number&&r.a.createElement(Ge,{name:a+"report_number",label:"RF:",type:"text",size:"10",maxLength:"255",className:"mx-1",classNameDiv:"m-1"}),Ne(t.value[c]).show_concluded&&r.a.createElement(He,{name:a+".concluded",label:"Conclu\xeddo",className:"mx-1",classNameDiv:"m-1"}),Ne(t.value[c]).show_deadline&&r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:a+".deadline",label:"Prazo (dias):",type:"number",min:"0",max:"999",placeholder:"prazo",className:"mx-1",classNameDiv:"m-1",validate:Be}),r.a.createElement(He,{name:a+".deadline_working_days",label:"Apenas dias \xfateis",className:"mx-1",classNameDiv:"m-1"})))),Ne(t.value[c]).show_fine&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row text-left m-1"},r.a.createElement("span",{className:"col-lg w-100"},"Multas:"),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:function(){return l(a+".notice_fines",{date:ye()().format("YYYY-MM-DD")})}},"Adicionar multa")),r.a.createElement("div",{className:"row pr-1 pb-1 w-100 justify-content-center"},r.a.createElement(ze.a,{name:a+".notice_fines"},(function(e){var t=e.fields;return t.map((function(e,a){return r.a.createElement(tt,{key:e,fields:t,name:e,index:a,isOwner:o})}))}))))))},nt=function(e){return e&&e.length>0?void 0:"Required"},rt=function(e){var t=e.notice,a=e.day,c=(e.isModalOpen,Object(o.b)()),l=Object(o.c)((function(e){return e.notice.notice_event_types.notice_event_types})),i=Object(o.c)((function(e){return e.user.users.users})),s=Object(o.c)((function(e){return e.auth.user})),m=Object(n.useState)(!1),d=Object(ge.a)(m,2),v=d[0],f=d[1];Object(n.useEffect)((function(){f(void 0!==s&&void 0!==t?s.id===t.owner:void 0!==s)}),[s,t]);var E=function(){var e="Tem certeza que gostaria de deletar este Auto?";e+="\r\n",e+="Data: "+ye()(t.date).format("DD/MM/YYYY");for(var a=function(a){e+="\r\n",e+="N\xba: "+t.notice_events[a].identification,e+=" ("+l.find((function(e){return e.id===t.notice_events[a].notice_event_type})).name+")"},n=0;n<t.notice_events.length;n++)a(n);window.confirm(e)&&(c(D.delete(t.id)),w.a.Modal.getInstance(document.getElementById("ModalEvent")).hide())};return r.a.createElement(Pe.b,{initialValues:t,onSubmit:function(e){var a=e.criarnovo;delete e.criarnovo;var n=!1;void 0!==e.id&&(0===e.id||a?(c(D.create(e)),n=!0):function(e){var a,n=t.notice_events.filter((a=e.notice_events,function(e){for(var t=0;t<a.length;t++)if(e.id===a[t].id)return!1;return!0}));if(0===n.length)return!0;for(var r="Salvando este Auto voc\xea estar\xe1 removendo:",c=function(e){r+="\r\n",r+="N\xba: "+n[e].identification,r+=" ("+l.find((function(t){return t.id===n[e].notice_event_type})).name+")"},o=0;o<n.length;o++)c(o);return r+="\r\n",r+="Gostaria de continuar?",window.confirm(r)}(e)&&(c(D.update(e)),n=!0)),n&&w.a.Modal.getInstance(document.getElementById("ModalEvent")).hide()},mutators:Object(u.a)(Object(u.a)({},Fe.a),{},{setValue:function(e,t,a){var n=Object(ge.a)(e,2),r=n[0],c=n[1];(0,a.changeValue)(t,r,(function(){return c}))}}),render:function(e){var n=e.handleSubmit,o=e.form.mutators.push,s=e.form;return r.a.createElement("form",{onSubmit:n,className:"needs-validation",noValidate:!0},r.a.createElement("div",{className:"modal-body container"},r.a.createElement("div",{className:"container"},r.a.createElement(We,{isDisabled:!0},r.a.createElement("div",{className:"row no-gutters form-inline"},r.a.createElement(Je,{name:"owner",label:"AFM:",validate:Be,className:"mx-1"},r.a.createElement("option",{value:""},"---------"),i.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.first_name," ",e.last_name)}))))),r.a.createElement(et,{name:"imovel",name_string:"imovel.name_string",label:"Im\xf3vel:",form:s,disabled:!v}),s&&t&&0===t.id&&void 0!==s.getFieldState("imovel")&&s.getFieldState("imovel").value&&r.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:function(){var e;c((e=s.getFieldState("imovel").value.id,function(t,a){var n=Object.assign({},{params:{imovel_id:e}},h(a));b.a.get("https://eventtrackerapi.calculoengenharia.com.br/api/latestnotice/",n).then((function(e){t({type:"NOTICE_GETLATEST",payload:e.data}),null!==e.data.imovel_id?(w.a.Modal.getInstance(document.getElementById("ModalEvent")).hide(),setTimeout((function(){var t=document.createElement("button");t.type="button",t.setAttribute("role","button"),t.setAttribute("data-bs-toggle","modal"),t.setAttribute("data-bs-target","#ModalEvent"),t.setAttribute("data-modalcall","notice"),t.setAttribute("data-notice_id",e.data.id),t.setAttribute("data-survey_id","0"),t.setAttribute("data-activity_id","0"),document.body.appendChild(t),t.click(),t.parentNode.removeChild(t)}),500)):t(p("N\xe3o foi encontrado Autos passados neste im\xf3vel"))})).catch((function(e){t(p(e))}))}))}},"Carregar Autos passados deste Im\xf3vel"),r.a.createElement(We,{isDisabled:!v},r.a.createElement(Ge,{name:"document",label:"CPF/CNPJ:",maxLength:"255",parse:function(e){if(!e)return e;var t=e.replace(/[^\d]/g,"");return e.length>14?Object(Ke.a)("99.999.999/9999-99",t):Object(Ke.a)("999.999.999-99",t)}}),r.a.createElement(Ge,{name:"address",label:"Endere\xe7o:",maxLength:"255"}),r.a.createElement(Ge,{name:"description",label:"Descri\xe7\xe3o:",component:"textarea",cols:"40",rows:"3"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-auto"},"Adicionar:"),r.a.createElement("div",{className:"col text-left"},l.map((function(e,t){return r.a.createElement("button",{key:t,type:"button",className:"btn btn-outline-primary btn-sm m-1",onClick:function(){return o("notice_events",{date:a.format("YYYY-MM-DD"),deadline:e.default_deadline,deadline_working_days:e.default_deadline_working_days,concluded:e.default_concluded,notice_event_type:e.id})}},e.name)}))))),r.a.createElement("div",{className:t&&0===t.id?"row d-none":"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm m-1",onClick:function(){console.log("getnoticereportdocx"),c(function(e){return function(t,a){var n=Object.assign({},{responseType:"blob",params:{notice_id:e.id}},h(a));try{b.a.get("https://eventtrackerapi.calculoengenharia.com.br/api/noticereportdocx/",n).then((function(e){var t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download="relat\xf3rio de Fiscaliza\xe7\xe3o.docx",n.click(),URL.revokeObjectURL(a)})).catch((function(e){t(p(e))}))}catch(r){console.log(r)}}}(t)),console.log(t.imovel)},disabled:!t||!t.imovel},"Gerar Relat\xf3rio de Fiscaliza\xe7\xe3o"),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm m-1",onClick:function(){var e;console.log("getVArequestdocx"),c((e=function(e){if(e)for(var t=0;t<e.notice_events.length;t++)if("Vistoria Administrativa"===Ne(e.notice_events[t]).name)return e.notice_events[t];return!1}(t),function(t,a){var n=Object.assign({},{responseType:"blob",params:{vistoria_administrativa_id:e.id}},h(a));console.log(e.id);try{b.a.get("https://eventtrackerapi.calculoengenharia.com.br/api/varequestdocx/",n).then((function(e){var t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download="Pedido de VA.docx",n.click(),URL.revokeObjectURL(a)})).catch((function(e){t(p(e))}))}catch(r){console.log(r)}}))},disabled:!t||!t.imovel},"Gerar Pedido de VA"))),r.a.createElement(We,{isDisabled:!v},r.a.createElement("div",{className:"container"},r.a.createElement(ze.a,{name:"notice_events",validate:nt},(function(e){var t=e.fields,a=e.meta.touched;return r.a.createElement("div",null,t.map((function(e,a){return r.a.createElement(at,{key:e,fields:t,name:e,index:a,push:o,isOwner:v})})),0===t.length&&a?r.a.createElement("div",{className:"invalid-feedback d-block"},"\xc9 necessario adicionar ao menos um Auto ou VA"):null)})))))),r.a.createElement($e,{isDisabled:!v,canDelete:void 0!==t&&0!==t.id,canCopy:void 0!==t&&0!==t.id,onDelete:E,form:s}))}})},ct=function(e){var t=e.survey,a=(e.day,e.isModalOpen,Object(o.b)()),c=Object(o.c)((function(e){return e.survey.survey_event_types.survey_event_types})),l=Object(o.c)((function(e){return e.user.users.users})),i=Object(o.c)((function(e){return e.auth.user})),s=Object(n.useState)(!1),m=Object(ge.a)(s,2),d=m[0],u=m[1];Object(n.useEffect)((function(){u(void 0!==i&&void 0!==t?i.id===t.owner:void 0!==i)}),[i,t]);var v=function(){var e="Tem certeza que gostaria de deletar esta Vistoria de ";e+=c.find((function(e){return e.id===t.survey_event_type})).name+"?",e+="\r\n",e+="N\xba: "+t.identification,e+="\r\n",e+="Data: "+ye()(t.date).format("DD/MM/YYYY"),window.confirm(e)&&(a(T.delete(t.id)),w.a.Modal.getInstance(document.getElementById("ModalEvent")).hide())};return r.a.createElement(Pe.b,{initialValues:t,onSubmit:function(e){var t=e.criarnovo;delete e.criarnovo;var n=!1;void 0!==e.id&&(0===e.id||t?(a(T.create(e)),n=!0):(a(T.update(e)),n=!0)),n&&w.a.Modal.getInstance(document.getElementById("ModalEvent")).hide()},mutators:{setValue:function(e,t,a){var n=Object(ge.a)(e,2),r=n[0],c=n[1];(0,a.changeValue)(t,r,(function(){return c}))}},render:function(e){var a=e.handleSubmit,n=e.form;return r.a.createElement("form",{onSubmit:a,className:"needs-validation",noValidate:!0},r.a.createElement("div",{className:"modal-body container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form-inline"},r.a.createElement(We,{isDisabled:!0},r.a.createElement(Je,{name:"owner",label:"AFM:",validate:Be,className:"m-1",classNameDiv:"mx-1"},r.a.createElement("option",{value:""},"---------"),l.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.first_name," ",e.last_name)})))),r.a.createElement(We,{isDisabled:!d},r.a.createElement(Ge,{name:"date",label:"Data:",type:"date",className:"m-1",classNameDiv:"mx-1",validate:Be}))),r.a.createElement(et,{name:"imovel",name_string:"imovel.name_string",label:"Im\xf3vel:",form:n,disabled:!d}),r.a.createElement(We,{isDisabled:!d},r.a.createElement(Ge,{name:"document",label:"CPF/CNPJ:",maxLength:"255",parse:function(e){if(!e)return e;var t=e.replace(/[^\d]/g,"");return e.length>14?Object(Ke.a)("99.999.999/9999-99",t):Object(Ke.a)("999.999.999-99",t)}}),r.a.createElement(Ge,{name:"address",label:"Endere\xe7o:",maxLength:"255"}),r.a.createElement(Ge,{name:"description",label:"Descri\xe7\xe3o:",component:"textarea",cols:"40",rows:"3"}),r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"identification",label:"Identifica\xe7\xe3o:",maxLength:"255",className:"m-1",classNameDiv:"mx-1",validate:Be}),r.a.createElement(Je,{name:"survey_event_type",label:"Tipo:",className:"m-1",classNameDiv:"mx-1",validate:Be},r.a.createElement("option",{value:""},"---------"),c.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.order," - ",e.name)}))),r.a.createElement(He,{name:"concluded",label:"Conclu\xeddo",className:"m-1",classNameDiv:"mx-1"})))))),r.a.createElement($e,{isDisabled:!d,canDelete:void 0!==t&&0!==t.id,canCopy:void 0!==t&&0!==t.id,onDelete:v,form:n}))}})},lt=function(e){var t=e.activity,a=(e.day,e.isModalOpen,Object(o.b)()),c=Object(o.c)((function(e){return e.activity.activitys.activitys})),l=Object(o.c)((function(e){return e.user.users.users})),i=Object(o.c)((function(e){return e.auth.user})),s=Object(n.useState)(!1),m=Object(ge.a)(s,2),d=m[0],u=m[1];Object(n.useEffect)((function(){u(void 0!==i&&void 0!==t?i.id===t.owner:void 0!==i)}),[i,t]);var v=function(){var e="Tem certeza que gostaria de deletar esta Atividade?";e+="\r\n",e+="Data: "+ye()(t.date).format("DD/MM/YYYY"),window.confirm(e)&&(a(I.delete(t.id)),w.a.Modal.getInstance(document.getElementById("ModalEvent")).hide())};return r.a.createElement(Pe.b,{initialValues:t,onSubmit:function(e){var t=e.criarnovo;delete e.criarnovo;var n=!1,r={ERROR:"Apenas \xe9 permitido um registro de atividade por data"};if(void 0!==e.id)if(0===e.id||t){if(c.filter((function(t){return t.date===e.date&&t.owner===e.owner})).length>0)return void a(f(r));a(I.create(e)),n=!0}else{if(c.filter((function(t){return t.id!==e.id&&t.date===e.date&&t.owner===e.owner})).length>0)return void a(f(r));a(I.update(e)),n=!0}n&&w.a.Modal.getInstance(document.getElementById("ModalEvent")).hide()},render:function(e){var a=e.handleSubmit,n=e.form;return r.a.createElement("form",{onSubmit:a,className:"needs-validation",noValidate:!0},r.a.createElement("div",{className:"modal-body container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form-inline"},r.a.createElement(We,{isDisabled:!0},r.a.createElement(Je,{name:"owner",label:"AFM:",className:"m-1",classNameDiv:"mx-1",validate:Be},r.a.createElement("option",{value:""},"---------"),l.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.first_name," ",e.last_name)})))),r.a.createElement(We,{isDisabled:!d},r.a.createElement(Ge,{name:"date",label:"Data:",type:"date",className:"m-1",classNameDiv:"mx-1",validate:Be}))),r.a.createElement(We,{isDisabled:!d},r.a.createElement(Ge,{name:"description",label:"Descri\xe7\xe3o:",component:"textarea",cols:"40",rows:"20",validate:Be})))),r.a.createElement($e,{isDisabled:!d,canDelete:void 0!==t&&0!==t.id,canCopy:void 0!==t&&0!==t.id,onDelete:v,form:n}))}})},ot=function(e){var t=e.active,a=e.name;return r.a.createElement("a",{className:"nav-item nav-link font-weight-bold text-capitalize"+(t?"":" disabled"),id:"nav-"+a+"-tab","data-bs-toggle":"tab",href:"#nav-"+a,role:"tab","aria-controls":"nav-"+a},a)},it=function(e){var t=e.name,a=e.children;return r.a.createElement("div",{className:"tab-pane fade",id:"nav-"+t,role:"tabpanel","aria-labelledby":"nav-"+t+"-tab"},a)},st=function(){var e=Object(n.useState)(!1),t=Object(ge.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),o=Object(ge.a)(l,2),i=o[0],s=o[1],m=Object(n.useState)(),d=Object(ge.a)(m,2),u=d[0],v=d[1],b=Object(n.useState)(),f=Object(ge.a)(b,2),p=f[0],E=f[1],y=Object(n.useState)({title:"Criar",noticetab:!0,surveytab:!0,activitytab:!0}),g=Object(ge.a)(y,2),h=g[0],_=g[1],N=Object(n.useState)(),O=Object(ge.a)(N,2),j=O[0],w=O[1],D=function(e){var t,a,n,r=ae.getState().user.users.current,l=ae.getState().notice.notices.notices,o=ae.getState().survey.surveys.surveys,i=ae.getState().activity.activitys.activitys;w(ye()(e.relatedTarget.dataset.day)),"0"!==e.relatedTarget.dataset.notice_id&&(t=l.find((function(t){return t.id.toString()===e.relatedTarget.dataset.notice_id}))),s(void 0!==t?t:{id:0,imovel:null,imovel_id:null,document:null,date:e.relatedTarget.dataset.day,address:null,description:null,owner:r.id,notice_events:[],css_name:null,resethack:[]}),"0"!==e.relatedTarget.dataset.survey_id&&(a=o.find((function(t){return t.id.toString()===e.relatedTarget.dataset.survey_id}))),v(void 0!==a?a:{id:0,imovel:null,imovel_id:null,document:null,identification:null,date:e.relatedTarget.dataset.day,survey_event_type:null,address:null,description:null,concluded:!1,owner:r.id,resethack:[]}),"0"!==e.relatedTarget.dataset.activity_id&&(n=i.find((function(t){return t.id.toString()===e.relatedTarget.dataset.activity_id}))),E(void 0!==n?n:{id:0,date:e.relatedTarget.dataset.day,owner:r.id,description:null,resethack:[]}),"notice"===e.relatedTarget.dataset.modalcall&&_({title:"Editar Auto",noticetab:!0,surveytab:!1,activitytab:!1}),"survey"===e.relatedTarget.dataset.modalcall&&_({title:"Editar Vistoria",noticetab:!1,surveytab:!0,activitytab:!1}),"activity"===e.relatedTarget.dataset.modalcall&&_({title:"Editar Atividade",noticetab:!1,surveytab:!1,activitytab:!0}),"none"===e.relatedTarget.dataset.modalcall&&_({title:"Criar",noticetab:!0,surveytab:!0,activitytab:!0}),c(!0)},S=function(e){c(!1)};return Object(n.useEffect)((function(){return!h.noticetab||h.surveytab||h.activitytab?h.noticetab||!h.surveytab||h.activitytab?h.noticetab||h.surveytab||!h.activitytab?document.getElementById("nav-auto-tab").click():document.getElementById("nav-atividade-tab").click():document.getElementById("nav-vistoria-tab").click():document.getElementById("nav-auto-tab").click(),window.addEventListener("show.bs.modal",D),window.addEventListener("hidden.bs.modal",S),function(){window.removeEventListener("show.bs.modal",D),window.removeEventListener("hidden.bs.modal",S)}}),[h]),r.a.createElement("div",{id:"ModalEvent",className:"modal fade",tabIndex:"-1",role:"dialog","aria-hidden":"true","data-backdrop":"static"},r.a.createElement("div",{className:"modal-dialog modal-lg",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title font-weight-bold",id:"id_modal-header"},h.title),r.a.createElement("button",{type:"button",className:"close","data-bs-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("nav",null,r.a.createElement("div",{className:"nav nav-tabs justify-content-center",id:"nav-tab",role:"tablist"},r.a.createElement(ot,{active:h.noticetab,name:"auto"}),r.a.createElement(ot,{active:h.surveytab,name:"vistoria"}),r.a.createElement(ot,{active:h.activitytab,name:"atividade"}))),r.a.createElement("div",{className:"tab-content",id:"nav-tabContent"},r.a.createElement(it,{name:"auto"},r.a.createElement(rt,{notice:i,day:j,isModalOpen:a})),r.a.createElement(it,{name:"vistoria"},r.a.createElement(ct,{survey:u,day:j,isModalOpen:a})),r.a.createElement(it,{name:"atividade"},r.a.createElement(lt,{activity:p,day:j,isModalOpen:a}))))))},mt=function(e){var t=e.momentdate,a=e.dateType,n=Object(o.b)(),c=Object(o.c)((function(e){return e.user.users.users})),l=Object(o.c)((function(e){return e.user.users.current})),i=Object(o.c)((function(e){return e.date}));return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light p-2"},r.a.createElement("div",{className:"form-inline"},r.a.createElement("button",{className:"btn btn-sm btn-outline-primary mx-1 d-none d-lg-inline-block",type:"button","data-bs-toggle":"modal","data-bs-target":"#ModalEvent","data-modalcall":"none","data-day":i?i.format("YYYY-MM-DD"):""},"Novo Evento"),r.a.createElement(Pe.b,{initialValues:{momentdate:t,currentUser:l},onSubmit:function(e){},render:function(e){var l=e.handleSubmit;return r.a.createElement("form",{onSubmit:l,className:"needs-validation d-flex",noValidate:!0},r.a.createElement("div",{className:"col form-inline"},r.a.createElement(Je,{name:"currentUser.id",label:"AFM:",className:"mx-1"},c.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.first_name," ",e.last_name)}))),r.a.createElement(Qe.b,{name:"currentUser.id"},(function(e,t){var a=c.find((function(t){return t.id.toString()===e}));void 0!==a&&n(function(e){return{type:"USER_NEW",payload:e}}(a))}))),t&&a&&r.a.createElement("div",{className:"col form-inline"},r.a.createElement(Ge,{name:"momentdate",label:"data:",type:a,className:"mx-1",validate:Be,parse:"month"===a?function(e){return e&&ye()(e+"-01")}:function(e){return e&&ye()(e)},format:"month"===a?function(e){return e?e.format("YYYY-MM"):""}:function(e){return e?e.format("YYYY-MM-DD"):""}}),r.a.createElement(Qe.b,{name:"momentdate"},(function(e,t){n(we(e))}))))}})))},dt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.date})),a=Object(o.c)((function(e){return e.user.users.current})),c=Object(le.h)();return Object(n.useEffect)((function(){var t=ye()();""!==c.hash&&(t=ye()(he(c.hash.substring(1)))),e(we(t))}),[e,c.hash]),t?r.a.createElement("div",null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row no-gutters px-3"},r.a.createElement(st,null),r.a.createElement("div",{className:"col col-12"},r.a.createElement(mt,{momentdate:t,dateType:"month"}),r.a.createElement(Ve,{momentdate:t,user:a}))))):null},ut=(a(88),function(e){var t=e.momentdate,a=Object(o.b)();return Object(n.useEffect)((function(){ye.a.locale("pt-br"),a(H.read()),a(C.read()),a(A.read()),a(R.read());var e={start_date:t.clone().format("YYYY-MM-DD"),end_date:t.clone().format("YYYY-MM-DD")};a(D.read(e)),a(T.read(e)),a(I.read(e))}),[a,t]),r.a.createElement("table",{id:"calendartarefa",className:"table table-light table-bordered "},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement(Ie,{day:t,momentdate:t},t.format("D").toString()))))}),vt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.date})),a=Object(o.c)((function(e){return e.user.users.current})),c=Object(le.h)();return Object(n.useEffect)((function(){var t=ye()();""!==c.hash&&(t=ye()(he(c.hash.substring(1)))),e(we(t))}),[e,c.hash]),t?r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row no-gutters px-3 justify-content-md-center"},r.a.createElement(st,null),r.a.createElement("div",{className:"col col-12 col-md-9 col-lg-6"},r.a.createElement(mt,{momentdate:t,dateType:"date"}),r.a.createElement(ut,{momentdate:t,user:a})))):null},bt=function(e){var t=e.authUser,a=Object(o.b)();return r.a.createElement(Pe.b,{validate:function(e){var t={};return e.new_password!==e.new_password_check&&(t.new_password="As novas senhas devem ser a iguais"),t},onSubmit:function(e){var n;e.new_password===e.new_password_check&&a((n=Object(u.a)({user:t},e),function(e,t){b.a.put("https://eventtrackerapi.calculoengenharia.com.br/api/changepassword/",Object(u.a)({},n),h(t)).then((function(t){e(f({CRUDupdate:"Senha alterada com sucesso!"})),e(g())})).catch((function(t){return e(p(t))}))}))},render:function(e){var t=e.handleSubmit,a=e.submitError;return r.a.createElement("form",{onSubmit:t,className:"needs-validation",noValidate:!0},a&&r.a.createElement("div",{className:"error"},a),r.a.createElement("div",{className:"form-inline p-1"},r.a.createElement(Ge,{name:"old_password",label:"Senha atual: ",type:"password",className:"mx-1",validate:Be})),r.a.createElement("div",{className:"form-inline p-1"},r.a.createElement(Ge,{name:"new_password",label:"Nova Senha: ",type:"password",className:"mx-1",validate:Be})),r.a.createElement("div",{className:"form-inline p-1"},r.a.createElement(Ge,{name:"new_password_check",label:"Nova Senha: ",type:"password",className:"mx-1",validate:Be})),r.a.createElement("button",{type:"submit",className:"btn btn-primary font-weight-bold mt-2"},"Alterar Senha"))}})},ft=function(e){var t=e.authUser,a=Object(o.b)();return r.a.createElement(Pe.b,{initialValues:t,onSubmit:function(e){a(W.update(e))},render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t,className:"needs-validation",noValidate:!0},r.a.createElement(Ge,{name:"username",label:"Username:",validate:Be}),r.a.createElement(Ge,{name:"first_name",label:"Nome:",validate:Be}),r.a.createElement(Ge,{name:"last_name",label:"Sobrenome:"}),r.a.createElement(Ge,{name:"email",label:"email:"}),r.a.createElement(Ge,{name:"profile.matricula",label:"Matr\xedcula:"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary font-weight-bold mt-2"},"Salvar"))}})},pt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.user})),a=Object(o.c)((function(e){return e.user.users.users}));return r.a.createElement(Pe.b,{initialValues:{user_id:t.id,month:ye()().format("YYYY-MM")},onSubmit:function(t){e(function(e){return function(t,a){var n=Object.assign({},{responseType:"blob",params:e},h(a)),r=ae.getState().user.users.users.find((function(t){return t.id.toString()===e.user_id.toString()})),c="";r&&(c=r.first_name,r.last_name&&(c+=" "+r.last_name),c+="-");var l="relat\xf3rio_mensal-"+c+e.month+".pdf";try{b.a.get("https://eventtrackerapi.calculoengenharia.com.br/api/reportpdf/",n).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=l,n.click(),URL.revokeObjectURL(a)})).catch((function(e){t(p(e))}))}catch(o){console.log(o)}}}(t))},render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t,className:"needs-validation",noValidate:!0},r.a.createElement("h5",null,"Baixar relat\xf3rio"),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Je,{name:"user_id",label:"AFM:",className:"m-1"},a.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.first_name," ",e.last_name)})))),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"month",label:"Refer\xeancia: ",type:"month",className:"m-1",validate:Be})),r.a.createElement("div",{className:"form-inline"},r.a.createElement("button",{type:"submit",className:"btn btn-primary font-weight-bold m-2"},"Criar relat\xf3rio")))}})},Et=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.user})),a=Object(o.c)((function(e){return e.user.users.users}));return r.a.createElement(Pe.b,{initialValues:{user_id:t.id,month:ye()().format("YYYY-MM")},onSubmit:function(t){e(function(e){return function(t,a){var n=Object.assign({},{responseType:"blob",params:e},h(a)),r=ae.getState().user.users.users.find((function(t){return t.id.toString()===e.user_id.toString()})),c="";r&&(c=r.first_name,r.last_name&&(c+=" "+r.last_name),c+="-");var l="planilha_mensal-"+c+e.month+".csv";try{b.a.get("https://eventtrackerapi.calculoengenharia.com.br/api/sheetcsv/",n).then((function(e){var t=new Blob([e.data],{type:"text/csv"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=l,n.click(),URL.revokeObjectURL(a)})).catch((function(e){t(p(e))}))}catch(o){console.log(o)}}}(t))},render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t,className:"needs-validation",noValidate:!0},r.a.createElement("h5",null,"Baixar planilha em formato csv"),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Je,{name:"user_id",label:"AFM:",className:"m-1"},a.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.first_name," ",e.last_name)})))),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"month",label:"Refer\xeancia: ",type:"month",className:"m-1",validate:Be})),r.a.createElement("div",{className:"form-inline"},r.a.createElement("button",{type:"submit",className:"btn btn-primary font-weight-bold m-2"},"Baixar planilha")))}})},yt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.imovel.updatelog}));return r.a.createElement(Pe.b,{initialValues:{check:""},onSubmit:function(t){var a;e((a=t,function(e,t){var n=Object.assign({},{params:a},h(t));b.a.get("https://eventtrackerapi.calculoengenharia.com.br/api/geoitajai/",n).then((function(t){e({type:"IMOVEL_UPDATEDATA",payload:t.data}),"N\xe3o Autorizado"===t.data.response?e(f({ERROR:t.data.response})):e(f({SUCCESS:t.data.response}))})).catch((function(t){e(p(t))}))})),e(z())},render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a,className:"needs-validation",noValidate:!0},r.a.createElement("h5",null,"Atualizar lista de im\xf3veis"),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"check",label:"Data: ",className:"m-1",validate:Be})),r.a.createElement("span",{style:{color:"red"}},"Obs.: O processo leva v\xe1rios minutos para completar, esta ferramenta n\xe3o deve ser utilizado com frequencia.",r.a.createElement("br",null),'Escreva a data de hoje no formato "',ye()().format("YYYY-MM-DD"),'".'),r.a.createElement("div",{className:"form-inline"},r.a.createElement("button",{type:"submit",className:"btn btn-primary font-weight-bold m-2"},"Atualizar")),t&&r.a.createElement("ul",{className:"list-group p-1 m-2 border"},r.a.createElement("li",{className:"list-group-item p-0 border-0"},"\xdaltimo Log: ",t.datetime),r.a.createElement("li",{className:"list-group-item p-0 border-0"},t.status,": ",t.response),r.a.createElement("li",{className:"list-group-item p-0 border-0"},"Total: ",t.total," / Inalterados: ",t.inalterados," ","/ Alterados: ",t.alterados," / Novos: ",t.novos)))}})},gt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.user}));Object(n.useEffect)((function(){if(e(H.read()),e(W.read()),t.is_staff){e(z());var a=setInterval((function(){e(z())}),3e4);return function(){clearInterval(a)}}}),[e,t]);return r.a.createElement("div",{className:"modal-body container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 offset-lg-1 col-lg-4"},r.a.createElement("h5",null,"Bem vindo, ",t?t.first_name?t.first_name:t.username:"","!"),r.a.createElement("h6",null," (\xfaltimo login: ",t?t.last_login:"",")"),r.a.createElement("div",null,r.a.createElement(ft,{authUser:t})),r.a.createElement("div",{className:"mt-2"},r.a.createElement(bt,{authUser:t}))),r.a.createElement("div",{className:"col-12 offset-lg-1 col-lg-4 mt-2 mt-lg-0"},r.a.createElement("div",{className:"row m-1 p-2 border"},r.a.createElement(pt,null)),r.a.createElement("div",{className:"row m-1 p-2 border"},r.a.createElement(Et,null)),r.a.createElement("div",{className:"row m-1 p-2"},r.a.createElement("button",{type:"button",className:"btn btn-primary font-weight-bold mt-2",onClick:function(){window.confirm("Tem certeza que gostaria sair de todas as Inst\xe2ncias?\r\nVoc\xea ter\xe1 que entrar novamente em todos os dispositivos.")&&e(g())}},"Sair de todos os locais")))),t&&t.is_staff&&r.a.createElement("div",{className:"row mt-3 m-1 p-2 border"},r.a.createElement(yt,null)))},ht=(a(89),function(e){var t=e.notice_event,a=Ne(t);return t&&a?r.a.createElement("span",{className:"row no-gutters py-1 text-truncate d-inline-block font-weight-bold"},"A. "+a.short_name+": ",null!==t.identification&&t.identification," ("+t.deadline_date+")"):null}),_t=function(e){var t=e.notice,a=e.concluded,c=e.notice_event_type,l=Object(o.b)(),i=Object(o.c)((function(e){return e.auth.user})),s=Object(n.useState)(!1),m=Object(ge.a)(s,2),d=m[0],u=m[1];Object(n.useEffect)((function(){u(void 0!==i&&void 0!==t?i.id===t.owner:void 0!==i)}),[i,t]);return t.notice_events.filter((function(e){return""!==c&&("0"===c||e.notice_event_type.toString()===c)})).filter((function(e){var t,n=Ne(e);return t=!n||n.show_concluded,"0"===a?!!t&&!e.concluded:"1"!==a||(!t||e.concluded)})).map((function(e){var a=Ne(e);return r.a.createElement("div",{key:e.id,style:{backgroundColor:a?a.css_color:"blue"},className:"row no-gutters event user-select-none text-truncate"+(e.concluded?" concluded":"")},r.a.createElement(xe,{notice_id:t.id,modalcall:"notice",title:t.imovel?t.imovel.name_string:"",day:ye()().format("YYYY-MM-DD")},r.a.createElement(ht,{notice_event:e})),a&&a.show_concluded&&r.a.createElement(Ae,{concluded:e.concluded,onclick:d?function(){return function(e){e.concluded=!e.concluded,l(D.update(t))}(e)}:function(){}}),r.a.createElement(Ce,{codigo_lote:t.imovel?t.imovel.codigo_lote:""}),r.a.createElement(ke,{address:t.imovel?t.imovel.logradouro+","+t.imovel.numero+"-"+t.imovel.bairro+"-itaja\xed":""}))}))},Nt=function(e){var t=e.title,a=e.concluded,n=e.notice_event_type,c=Object(o.c)((function(e){return e.user.users.current})),l=Object(o.c)((function(e){return e.notice.notices.notices.filter((function(e){return e.owner===c.id}))}));return r.a.createElement("div",{className:"border p-2 m-1"},r.a.createElement("span",null,r.a.createElement("strong",null,t||"")),l&&l.map((function(e){return r.a.createElement(_t,{key:e.id,notice:e,concluded:a,notice_event_type:n})})))},Ot=function(e){var t=e.title,a=e.concluded,n=e.survey_event_type,c=Object(o.c)((function(e){return e.user.users.current})),l=Object(o.c)((function(e){return e.survey.surveys.surveys.filter((function(e){return e.owner===c.id}))}));return r.a.createElement("div",{className:"border p-2 m-1"},r.a.createElement("span",null,r.a.createElement("strong",null,t||"")),l&&l.filter((function(e){return""!==n&&("0"===n||e.survey_event_type.toString()===n)})).filter((function(e){return"0"===a?!e.concluded:"1"!==a||e.concluded})).map((function(e){return r.a.createElement(Ue,{key:e.id,survey:e,day:ye()(e.date)})})))},jt=function(){var e=Object(o.b)();return Object(n.useEffect)((function(){e(H.read()),e(C.read()),e(A.read()),e(R.read());var t={concluded:"0"};e(D.read(t)),e(T.read(t))}),[e]),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row no-gutters justify-content-md-center"},r.a.createElement(st,null),r.a.createElement("div",{className:"col col-12 col-lg-9"},r.a.createElement(mt,null),r.a.createElement("div",{className:"row row-cols-1 row-cols-lg-2"},r.a.createElement("div",{className:"col"},r.a.createElement(Nt,{title:"Autos a concluir:",concluded:"0",notice_event_type:"0"})),r.a.createElement("div",{className:"col"},r.a.createElement(Ot,{title:"Vistorias a concluir:",concluded:"0",survey_event_type:"0"}))))))},wt=(a(90),function(){var e=Object(o.b)();return Object(n.useEffect)((function(){e(H.read()),e(C.read()),e(A.read()),e(R.read());var t={incompatible:!0};e(D.read(t)),e(T.read(t))}),[e]),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row no-gutters justify-content-md-center"},r.a.createElement(st,null),r.a.createElement("div",{className:"col col-12 col-lg-9"},r.a.createElement(mt,null),r.a.createElement("div",{className:"row row-cols-1 row-cols-lg-2"},r.a.createElement("div",{className:"col"},r.a.createElement(Nt,{title:"Autos sem im\xf3vel:",concluded:"",notice_event_type:"0"})),r.a.createElement("div",{className:"col"},r.a.createElement(Ot,{title:"Vistorias sem im\xf3vel:",concluded:"",survey_event_type:"0"}))))))}),Dt=(a(47),function(e){var t=e.state,a=e.setstate,n=Object(o.b)(),c=Object(o.c)((function(e){return e.survey.survey_event_types.survey_event_types})),l=Object(o.c)((function(e){return e.notice.notice_event_types.notice_event_types}));return r.a.createElement(Pe.b,{initialValues:t,mutators:{setValue:function(e,t,a){var n=Object(ge.a)(e,2),r=n[0],c=n[1];(0,a.changeValue)(t,r,(function(){return c}))}},onSubmit:function(e){""!==e.notice_event_type&&n(D.read(e)),""!==e.survey_event_type&&n(T.read(e)),a(e)},render:function(e){var t=e.handleSubmit,a=e.form;return r.a.createElement("form",{onSubmit:t,className:"needs-validation",noValidate:!0},r.a.createElement("div",{className:"modal-body container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"start_date",label:"Desde:",type:"date",className:"ml-1",classNameDiv:"mx-1"}),r.a.createElement(Se,{icon:"fa-times-circle-o",onclick:function(){a.mutators.setValue("start_date","")},title:"Limpar data"}),r.a.createElement(Ge,{name:"end_date",label:"At\xe9:",type:"date",className:"ml-1",classNameDiv:"mx-1"}),r.a.createElement(Se,{icon:"fa-times-circle-o",onclick:function(){a.mutators.setValue("end_date","")},title:"Limpar data"})),r.a.createElement(et,{name:"imovel",name_string:"imovel.name_string",label:"Im\xf3vel:",form:a}),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"identification",label:"Identifica\xe7\xe3o/N\xba:",maxLength:"255",className:"m-1",classNameDiv:"mx-1"}),r.a.createElement(Ge,{name:"document",label:"CPF/CNPJ:",maxLength:"255",parse:function(e){if(!e)return e;var t=e.replace(/[^\d]/g,"");return e.length>14?Object(Ke.a)("99.999.999/9999-99",t):Object(Ke.a)("999.999.999-99",t)},className:"m-1",classNameDiv:"mx-1"}),r.a.createElement(Je,{name:"concluded",label:"Conclu\xeddo:",className:"m-1",classNameDiv:"mx-1"},r.a.createElement("option",{value:""},"Nenhum"),r.a.createElement("option",{value:"0"},"N\xe3o conclu\xeddo"),r.a.createElement("option",{value:"1"},"Conclu\xeddo"))),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Je,{name:"notice_event_type",label:"Tipo de Auto:",className:"m-1",classNameDiv:"mx-1"},r.a.createElement("option",{value:""},"Nenhum"),r.a.createElement("option",{value:"0"},"Todos"),l.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.order," - ",e.name)}))),r.a.createElement(Je,{name:"survey_event_type",label:"Tipo de Vistoria:",className:"m-1",classNameDiv:"mx-1"},r.a.createElement("option",{value:""},"Nenhum"),r.a.createElement("option",{value:"0"},"Todos"),c.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.order," - ",e.name)}))))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("button",{type:"button",className:"btn btn-secondary mr-2",onClick:function(){a.reset()},title:"Recarregar"},r.a.createElement("i",{className:"fa fa-refresh"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Buscar"))))}})}),St=function(){var e=Object(o.b)(),t=Object(le.h)(),a=Object(n.useState)({start_date:ye()().startOf("month").format("YYYY-MM-DD"),end_date:ye()().endOf("month").format("YYYY-MM-DD"),imovel:"",imovel_id:"",identification:"",concluded:"",notice_event_type:"0",survey_event_type:"0"}),c=Object(ge.a)(a,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){e(H.read()),e(C.read()),e(R.read())}),[e,t]),r.a.createElement("div",{className:"container"},r.a.createElement(st,null),r.a.createElement(mt,null),r.a.createElement(Dt,{state:l,setstate:i}),r.a.createElement("h5",{className:"p-2"},"Resultado:"),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row no-gutters row-cols-1 row-cols-lg-2 justify-content-md-center"},r.a.createElement("div",{className:"col col-12 col-lg-5"},r.a.createElement(Nt,{title:"Autos:",concluded:l.concluded,notice_event_type:l.notice_event_type})),r.a.createElement("div",{className:"col col-12 col-lg-5"},r.a.createElement(Ot,{title:"Vistorias:",concluded:l.concluded,survey_event_type:l.survey_event_type})))))},At=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.user.userprofiles.users}));Object(n.useEffect)((function(){e(W.read())}),[e]);return r.a.createElement("table",{className:"table table-sm table-light table-striped table-bordered my-2"},r.a.createElement("caption",null,"Lista de usu\xe1rios"," ",r.a.createElement("button",{"data-bs-toggle":"modal","data-bs-target":"#ModalUser","data-modalcall":"none","data-user_id":"0",type:"button",className:"btn btn-sm btn-outline-primary"},"Adicionar")),r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Usu\xe1rio"),r.a.createElement("th",{scope:"col"},"Nome"),r.a.createElement("th",{scope:"col"},"Sobrenome"),r.a.createElement("th",{scope:"col"},"Email"),r.a.createElement("th",{scope:"col"},"Matr\xedcula"),r.a.createElement("th",{scope:"col"},"Administrador"),r.a.createElement("th",{scope:"col"},"\xdaltimo Login"),r.a.createElement("th",{scope:"col"},"Ativo"),r.a.createElement("th",{scope:"col"}))),r.a.createElement("tbody",null,t.map((function(t,a){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.username),r.a.createElement("td",null,t.first_name),r.a.createElement("td",null,t.last_name),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.profile.matricula),r.a.createElement("td",null,t.is_staff?"Sim":"N\xe3o"),r.a.createElement("td",null,t.last_login),r.a.createElement("td",null,t.is_active?"Sim":"N\xe3o"),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return function(t){var a="Tem certeza que gostaria de deletar este Usu\xe1rio?";a+="\r\n",a+="Usu\xe1rio: "+t.username,window.confirm(a)&&e(W.delete(t.id))}(t)},className:"btn btn-outline-primary border-0 d-flex justify-content-center align-content-between p-1 mr-1 float-right",type:"button",title:"Deletar usu\xe1rio"},r.a.createElement("i",{className:"fa fa-trash"})),r.a.createElement("button",{"data-bs-toggle":"modal","data-bs-target":"#ModalUser","data-modalcall":"user","data-user_id":t.id,className:"btn btn-outline-primary border-0 d-flex justify-content-center align-content-between p-1 mr-1 float-right",type:"button",title:"Editar usu\xe1rio"},r.a.createElement("i",{className:"fa fa-pencil-square-o"}))))}))))},kt=function(e){var t=e.user,a=Object(o.b)(),n=function(){var e="Tem certeza que gostaria de deletar este Usu\xe1rio?";e+="\r\n",e+="Usu\xe1rio: "+t.username,window.confirm(e)&&(a(W.delete(t.id)),w.a.Modal.getInstance(document.getElementById("ModalUser")).hide())};return r.a.createElement(Pe.b,{initialValues:t,onSubmit:function(e){var t=!1;void 0!==e.id&&(void 0!==e.password&&""!==e.password||delete e.password,0===e.id?(a(W.create(e)),t=!0):(a(W.update(e)),t=!0)),t&&w.a.Modal.getInstance(document.getElementById("ModalUser")).hide()},render:function(e){var a=e.handleSubmit,c=e.form;return r.a.createElement("form",{onSubmit:a,className:"needs-validation",noValidate:!0},r.a.createElement("div",{className:"modal-body container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"username",label:"Usu\xe1rio:",className:"m-1",validate:Be,format:function(e){return e?e.toLowerCase():""}})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"first_name",label:"Nome:",className:"m-1",validate:Be})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"last_name",label:"Sobrenome:",className:"m-1"})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"email",label:"Email:",className:"m-1"})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"profile.matricula",label:"Matr\xedcula:",className:"m-1"})),r.a.createElement(He,{name:"is_staff",label:"Administrador"}),r.a.createElement(He,{name:"is_active",label:"Ativo"}),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"password",label:"Senha:",className:"m-1",validate:function(e){return e?e.length>=4?void 0:"A senha deve ter ao menos 6 caracteres":void 0}})),r.a.createElement("span",null,"Obs.: Senha em branco n\xe3o ir\xe1 alterar a senha do usu\xe1rio."))),r.a.createElement($e,{canDelete:void 0!==t&&0!==t.id,canCopy:!1,onDelete:n,form:c}))}})},Ct=function(){var e=Object(n.useState)(),t=Object(ge.a)(e,2),a=t[0],c=t[1],l=function(e){var t,a=ae.getState().user.userprofiles.users;"0"!==e.relatedTarget.dataset.user_id&&(t=a.find((function(t){return t.id.toString()===e.relatedTarget.dataset.user_id}))),c(void 0!==t?t:{id:0,username:"",first_name:"",last_name:"",email:"",is_staff:!1,is_active:!0,resethack:[]})};return Object(n.useEffect)((function(){return window.addEventListener("show.bs.modal",l),function(){return window.removeEventListener("show.bs.modal",l)}}),[]),r.a.createElement("div",{id:"ModalUser",className:"modal fade",tabIndex:"-1",role:"dialog","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title font-weight-bold"},void 0!==a&&0!==a.id?"Editar "+a.username:"Novo usu\xe1rio"),r.a.createElement("button",{type:"button",className:"close","data-bs-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(kt,{user:a}))))},xt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.survey.survey_event_types.survey_event_types}));Object(n.useEffect)((function(){e(R.read())}),[e]);return r.a.createElement("table",{className:"table table-sm table-light table-striped table-bordered my-2"},r.a.createElement("caption",null,"Lista de Tipos de Vistorias"," ",r.a.createElement("button",{"data-bs-toggle":"modal","data-bs-target":"#ModalSurveyType","data-modalcall":"none","data-survey_type_id":"0",type:"button",className:"btn btn-sm btn-outline-primary"},"Adicionar")),r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Ordem"),r.a.createElement("th",{scope:"col"},"Nome"),r.a.createElement("th",{scope:"col"},"Abrevia\xe7\xe3o"),r.a.createElement("th",{scope:"col"},"Cor"),r.a.createElement("th",{scope:"col"}))),r.a.createElement("tbody",null,t.sort((function(e,t){return e.order-t.order})).map((function(t,a){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.order),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.short_name),r.a.createElement("td",null,t.css_color,r.a.createElement("input",{type:"color",disabled:!0,className:"mx-1",value:t.css_color?t.css_color:""})),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return function(t){var a="Tem certeza que gostaria de deletar este Tipo de Vistoria?";a+="\r\n",a+="Tipo de Vistoria: "+t.name,window.confirm(a)&&e(R.delete(t.id))}(t)},className:"btn btn-outline-primary border-0 d-flex justify-content-center align-content-between p-1 mr-1 float-right",type:"button",title:"Deletar tipo"},r.a.createElement("i",{className:"fa fa-trash"})),r.a.createElement("button",{"data-bs-toggle":"modal","data-bs-target":"#ModalSurveyType","data-modalcall":"surveytype","data-survey_type_id":t.id,className:"btn btn-outline-primary border-0 d-flex justify-content-center align-content-between p-1 mr-1 float-right",type:"button",title:"Editar tipo"},r.a.createElement("i",{className:"fa fa-pencil-square-o"}))))}))))},Mt=function(e){var t=e.surveyType,a=Object(o.b)(),n=function(){var e="Tem certeza que gostaria de deletar este Tipo de Vistoria?";e+="\r\n",e+="Tipo de Vistoria: "+t.name,window.confirm(e)&&(a(R.delete(t.id)),w.a.Modal.getInstance(document.getElementById("ModalSurveyType")).hide())};return r.a.createElement(Pe.b,{initialValues:t,onSubmit:function(e){var t=!1;void 0!==e.id&&(0===e.id?(a(R.create(e)),t=!0):(a(R.update(e)),t=!0)),t&&w.a.Modal.getInstance(document.getElementById("ModalSurveyType")).hide()},render:function(e){var a=e.handleSubmit,c=e.form;return r.a.createElement("form",{onSubmit:a,className:"needs-validation",noValidate:!0},r.a.createElement("div",{className:"modal-body container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"order",label:"Ordem:",type:"number",className:"m-1",min:"1",max:"99",validate:Be})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"name",label:"Nome:",className:"m-1",validate:Be})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"short_name",label:"Abrevia\xe7\xe3o:",className:"m-1",validate:Be})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"css_color",parse:Object(Ke.a)("#AAAAAA"),label:"Cor:",className:"m-1",validate:Be}),r.a.createElement(Ge,{name:"css_color",type:"color",className:"m-1",validate:Be})))),r.a.createElement($e,{canDelete:void 0!==t&&0!==t.id,canCopy:!1,onDelete:n,form:c}))}})},Tt=function(){var e=Object(n.useState)(),t=Object(ge.a)(e,2),a=t[0],c=t[1],l=function(e){var t,a=ae.getState().survey.survey_event_types.survey_event_types;"0"!==e.relatedTarget.dataset.survey_type_id&&(t=a.find((function(t){return t.id.toString()===e.relatedTarget.dataset.survey_type_id}))),c(void 0!==t?t:{id:0,order:"",name:"",short_name:"",css_color:"",resethack:[]})};return Object(n.useEffect)((function(){return window.addEventListener("show.bs.modal",l),function(){return window.removeEventListener("show.bs.modal",l)}}),[]),r.a.createElement("div",{id:"ModalSurveyType",className:"modal fade",tabIndex:"-1",role:"dialog","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title font-weight-bold"},void 0!==a&&0!==a.id?"Editar "+a.name:"Novo tipo de Vistoria"),r.a.createElement("button",{type:"button",className:"close","data-bs-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(Mt,{surveyType:a}))))},Yt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notice.notice_event_types.notice_event_types}));Object(n.useEffect)((function(){e(C.read())}),[e]);return r.a.createElement("table",{className:"table table-sm table-light table-striped table-bordered my-2"},r.a.createElement("caption",null,"Lista de Tipos de Autos e relacionados"," ",r.a.createElement("button",{"data-bs-toggle":"modal","data-bs-target":"#ModalNoticeType","data-modalcall":"none","data-notice_type_id":"0",type:"button",className:"btn btn-sm btn-outline-primary"},"Adicionar")),r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",rowSpan:"2"},"#"),r.a.createElement("th",{scope:"col",rowSpan:"2"},"Ordem"),r.a.createElement("th",{scope:"col",rowSpan:"2"},"Nome"),r.a.createElement("th",{scope:"col",rowSpan:"2"},"Abrevia\xe7\xe3o"),r.a.createElement("th",{scope:"col",colSpan:"3"},"Padr\xe3o"),r.a.createElement("th",{scope:"col",rowSpan:"2"},"Cor"),r.a.createElement("th",{scope:"col",colSpan:"5"},"Mostrar"),r.a.createElement("th",{scope:"col",rowSpan:"2"})),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Prazo (dias)"),r.a.createElement("th",{scope:"col"},"Dias \xfateis"),r.a.createElement("th",{scope:"col"},"Concluido"),r.a.createElement("th",{scope:"col"},"Concluido"),r.a.createElement("th",{scope:"col"},"RF"),r.a.createElement("th",{scope:"col"},"Prazo"),r.a.createElement("th",{scope:"col"},"Multa"),r.a.createElement("th",{scope:"col"},"Na data de in\xedcio"))),r.a.createElement("tbody",null,t.sort((function(e,t){return e.order-t.order})).map((function(t,a){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.order),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.short_name),r.a.createElement("td",null,t.default_deadline),r.a.createElement("td",null,t.default_deadline_working_days?"Sim":"N\xe3o"),r.a.createElement("td",null,t.default_concluded?"Sim":"N\xe3o"),r.a.createElement("td",null,t.css_color,r.a.createElement("input",{type:"color",disabled:!0,className:"mx-1",value:t.css_color?t.css_color:""})),r.a.createElement("td",null,t.show_concluded?"Sim":"N\xe3o"),r.a.createElement("td",null,t.show_report_number?"Sim":"N\xe3o"),r.a.createElement("td",null,t.show_deadline?"Sim":"N\xe3o"),r.a.createElement("td",null,t.show_fine?"Sim":"N\xe3o"),r.a.createElement("td",null,t.show_start?"Sim":"N\xe3o"),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return function(t){var a="Tem certeza que gostaria de deletar este Tipo de Auto?";a+="\r\n",a+="Tipo de Auto: "+t.name,window.confirm(a)&&e(C.delete(t.id))}(t)},className:"btn btn-outline-primary border-0 d-flex justify-content-center align-content-between p-1 mr-1 float-right",type:"button",title:"Deletar tipo"},r.a.createElement("i",{className:"fa fa-trash"})),r.a.createElement("button",{"data-bs-toggle":"modal","data-bs-target":"#ModalNoticeType","data-modalcall":"noticetype","data-notice_type_id":t.id,className:"btn btn-outline-primary border-0 d-flex justify-content-center align-content-between p-1 mr-1 float-right",type:"button",title:"Editar tipo"},r.a.createElement("i",{className:"fa fa-pencil-square-o"}))))}))))},Rt=function(e){var t=e.noticeType,a=Object(o.b)(),n=function(){var e="Tem certeza que gostaria de deletar este Tipo de Auto?";e+="\r\n",e+="Tipo de Auto: "+t.name,window.confirm(e)&&(a(C.delete(t.id)),w.a.Modal.getInstance(document.getElementById("ModalNoticeType")).hide())};return r.a.createElement(Pe.b,{initialValues:t,onSubmit:function(e){var t=!1;void 0!==e.id&&(0===e.id?(a(C.create(e)),t=!0):(a(C.update(e)),t=!0)),t&&w.a.Modal.getInstance(document.getElementById("ModalNoticeType")).hide()},render:function(e){var a=e.handleSubmit,c=e.form;return r.a.createElement("form",{onSubmit:a,className:"needs-validation",noValidate:!0},r.a.createElement("div",{className:"modal-body container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"order",label:"Ordem:",type:"number",className:"m-1",min:"1",max:"99",validate:Be})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"name",label:"Nome:",className:"m-1",validate:Be})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"short_name",label:"Abrevia\xe7\xe3o:",className:"m-1",validate:Be})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"default_deadline",label:"Prazo padr\xe3o (dias):",type:"number",min:"0",max:"999",className:"m-1",validate:Be}),r.a.createElement(He,{name:"default_deadline_working_days",label:"apenas dias \xfateis"})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(He,{name:"default_concluded",label:"Concluido por padr\xe3o"})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"css_color",parse:Object(Ke.a)("#AAAAAA"),label:"Cor:",className:"m-1",validate:Be}),r.a.createElement(Ge,{name:"css_color",type:"color",className:"m-1",validate:Be})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(He,{name:"show_concluded",label:"Tem conclus\xe3o?"})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(He,{name:"show_report_number",label:"Tem Relat\xf3rio Fiscal?"})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(He,{name:"show_deadline",label:"Tem prazo?"})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(He,{name:"show_fine",label:"Tem Multas?"})),r.a.createElement("div",{className:"form-inline"},r.a.createElement(He,{name:"show_start",label:"Mostrar evento na data de in\xedcio?"})))),r.a.createElement($e,{canDelete:void 0!==t&&0!==t.id,canCopy:!1,onDelete:n,form:c}))}})},Lt=function(){var e=Object(n.useState)(),t=Object(ge.a)(e,2),a=t[0],c=t[1],l=function(e){var t,a=ae.getState().notice.notice_event_types.notice_event_types;"0"!==e.relatedTarget.dataset.notice_type_id&&(t=a.find((function(t){return t.id.toString()===e.relatedTarget.dataset.notice_type_id}))),c(void 0!==t?t:{id:0,order:"",name:"",short_name:"",default_deadline:0,default_deadline_working_days:!0,default_concluded:!1,css_color:"",show_concluded:!0,show_report_number:!0,show_deadline:!0,show_fine:!0,show_start:!0,resethack:[]})};return Object(n.useEffect)((function(){return window.addEventListener("show.bs.modal",l),function(){return window.removeEventListener("show.bs.modal",l)}}),[]),r.a.createElement("div",{id:"ModalNoticeType",className:"modal fade",tabIndex:"-1",role:"dialog","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title font-weight-bold"},void 0!==a&&0!==a.id?"Editar "+a.name:"Novo tipo de Auto"),r.a.createElement("button",{type:"button",className:"close","data-bs-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(Rt,{noticeType:a}))))},Ut=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notice.notice_colors.notice_colors}));Object(n.useEffect)((function(){e(A.read())}),[e]);return r.a.createElement("table",{className:"table table-sm table-light table-striped table-bordered my-2"},r.a.createElement("caption",null,"Lista de Cores para data de in\xedcio dos Autos e relacionados"," ",r.a.createElement("button",{"data-bs-toggle":"modal","data-bs-target":"#ModalNoticeColor","data-modalcall":"none","data-notice_color_id":"0",type:"button",className:"btn btn-sm btn-outline-primary"},"Adicionar")),r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Combina\xe7\xe3o"),r.a.createElement("th",{scope:"col"},"Cor"),r.a.createElement("th",{scope:"col"}))),r.a.createElement("tbody",null,t.map((function(t,a){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.css_name),r.a.createElement("td",null,t.css_color,r.a.createElement("input",{type:"color",disabled:!0,className:"mx-1",value:t.css_color})),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return function(t){var a="Tem certeza que gostaria de deletar esta cor de Auto?";a+="\r\n",a+="Combina\xe7\xe3o: "+t.css_name,window.confirm(a)&&e(A.delete(t.id))}(t)},className:"btn btn-outline-primary border-0 d-flex justify-content-center align-content-between p-1 mr-1 float-right",type:"button",title:"Deletar tipo"},r.a.createElement("i",{className:"fa fa-trash"})),r.a.createElement("button",{"data-bs-toggle":"modal","data-bs-target":"#ModalNoticeColor","data-modalcall":"noticecolor","data-notice_color_id":t.id,className:"btn btn-outline-primary border-0 d-flex justify-content-center align-content-between p-1 mr-1 float-right",type:"button",title:"Editar tipo"},r.a.createElement("i",{className:"fa fa-pencil-square-o"}))))}))))},It=function(e){var t=e.noticeColor,a=Object(o.b)(),n=Object(o.c)((function(e){return e.notice.notice_event_types.notice_event_types})),c=function(){var e="Tem certeza que gostaria de deletar esta cor de Auto?";e+="\r\n",e+="Combina\xe7\xe3o: "+t.css_name,window.confirm(e)&&(a(A.delete(t.id)),w.a.Modal.getInstance(document.getElementById("ModalNoticeColor")).hide())};return r.a.createElement(Pe.b,{initialValues:t,onSubmit:function(e){var t=!1;void 0!==e.id&&(0===e.id?(a(A.create(e)),t=!0):(a(A.update(e)),t=!0)),t&&w.a.Modal.getInstance(document.getElementById("ModalNoticeColor")).hide()},render:function(e){var a=e.handleSubmit,l=e.form;return r.a.createElement("form",{onSubmit:a,className:"needs-validation",noValidate:!0},r.a.createElement("div",{className:"modal-body container"},r.a.createElement("div",{className:"container"},r.a.createElement(Je,{name:"notice_event_types",label:"Combina\xe7\xe3o de Autos:",validate:Be,className:"m-1 custom-select",multiple:!0,classNameDiv:"mx-1",size:n.length},n.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("span",null,"Obs.: Precione CTRL para multiplas sele\xe7\xf5es."),r.a.createElement("div",{className:"form-inline"},r.a.createElement(Ge,{name:"css_color",parse:Object(Ke.a)("#AAAAAA"),label:"Cor:",className:"m-1",validate:Be}),r.a.createElement(Ge,{name:"css_color",type:"color",className:"m-1",validate:Be})))),r.a.createElement($e,{canDelete:void 0!==t&&0!==t.id,canCopy:!1,onDelete:c,form:l}))}})},Vt=function(){var e=Object(n.useState)(),t=Object(ge.a)(e,2),a=t[0],c=t[1],l=function(e){var t,a=ae.getState().notice.notice_colors.notice_colors;"0"!==e.relatedTarget.dataset.notice_color_id&&(t=a.find((function(t){return t.id.toString()===e.relatedTarget.dataset.notice_color_id}))),c(void 0!==t?t:{id:0,css_color:"",resethack:[]})};return Object(n.useEffect)((function(){return window.addEventListener("show.bs.modal",l),function(){return window.removeEventListener("show.bs.modal",l)}}),[]),r.a.createElement("div",{id:"ModalNoticeColor",className:"modal fade",tabIndex:"-1",role:"dialog","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title font-weight-bold"},void 0!==a&&0!==a.id?"Editar "+a.name:"Nova combina\xe7\xe3o para Cor"),r.a.createElement("button",{type:"button",className:"close","data-bs-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(It,{noticeColor:a}))))},Pt=function(){return r.a.createElement("div",null,r.a.createElement(Ct,null),r.a.createElement(Tt,null),r.a.createElement(Lt,null),r.a.createElement(Vt,null),r.a.createElement("div",{className:"mx-5"},r.a.createElement(At,null),r.a.createElement(xt,null),r.a.createElement(Yt,null),r.a.createElement(Ut,null),r.a.createElement("a",{href:"https://materializecss.com/color.html#palette",target:"_blank",rel:"noreferrer noopener"},"Paleta de cores para refer\xeancia")))},Ft=function(e){var t=Object(n.useState)(e),a=Object(ge.a)(t,2),r=a[0],c=a[1];return{value:r,setValue:c,reset:function(){return c("")},bind:{value:r,onChange:function(e){c(e.target.value)}}}},zt=function(){var e=Object(le.g)(),t=Object(o.c)((function(e){return e.auth})),a=Object(o.b)(),c=Object(n.useState)(!1),l=Object(ge.a)(c,2),i=l[0],s=l[1],m=Ft(""),d=m.value,u=m.bind,v=m.reset,g=Ft(""),h=g.value,_=g.bind,N=g.reset;Object(n.useEffect)((function(){t.isAuthenticated&&!i?a(y()):t.isAuthenticated&&i&&e.push("/")}),[a,t,i,e]);return r.a.createElement("div",{className:"h-100 v-100 d-grid justify-content-center pt-2 pt-lg-5"},r.a.createElement("form",{className:"form-signin",onSubmit:function(e){e.preventDefault(),a(function(e,t){return function(a){var n={headers:{Authorization:"Basic ".concat(btoa(e+":"+t))}};b.a.post("https://eventtrackerapi.calculoengenharia.com.br/api/auth/login/",null,n).then((function(e){a(f("Bem vindo")),a({type:"LOGIN_SUCCESS",payload:e.data}),a(E())})).catch((function(e){a(p(e)),a({type:"LOGIN_FAIL"})}))}}(d,h)),v(),N(),s(!0)}},r.a.createElement("div",{className:"mb-lg-3 row"},r.a.createElement("h3",{className:"mb-lg-3 font-weight-normal"},"Acesso restrito")),r.a.createElement("div",{className:"mb-lg-3 row"},r.a.createElement("label",{htmlFor:"staticEmail",className:"col-lg-3 col-form-label"},"Usu\xe1rio:"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",Object.assign({type:"text",className:"form-control",id:"inputUsername"},u)))),r.a.createElement("div",{className:"mb-2 mb-lg-3 row"},r.a.createElement("label",{htmlFor:"inputPassword",className:"col-lg-3 col-form-label"},"Senha:"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",Object.assign({type:"password",className:"form-control",id:"inputPassword"},_)))),r.a.createElement("div",{className:"mb-2 mb-lg-3 text-center"},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Entrar"))))},Bt=function(){var e=Object(o.b)();return Object(n.useEffect)((function(){e(y())}),[e]),r.a.createElement(le.a,{to:"/login"})},qt=(a(91),function(e){var t=e.component,a=Object(oe.a)(e,["component"]),n=Object(o.c)((function(e){return e.auth}));return r.a.createElement(le.b,Object.assign({},a,{render:function(e){return n.isLoading||null==n.isAuthenticated?r.a.createElement(ie,null):n.isAuthenticated?n.user.is_staff?r.a.createElement(t,e):r.a.createElement(le.a,{to:"/NotAutorized"}):r.a.createElement(le.a,{to:"/login"})}}))}),Gt=function(){Object(n.useEffect)((function(){ae.dispatch(E()),ae.dispatch(W.read())}),[]);return r.a.createElement(o.a,{store:ae},r.a.createElement(re.a,Object.assign({template:pe},{timeout:3e3,position:"bottom center",containerStyle:{zIndex:1070}}),r.a.createElement(ce.a,null,r.a.createElement(fe,null),r.a.createElement(ue,null),r.a.createElement("main",{role:"main"},r.a.createElement(le.d,null,r.a.createElement(se,{exact:!0,path:"/",component:dt}),r.a.createElement(se,{exact:!0,path:"/perfil",component:gt}),r.a.createElement(se,{exact:!0,path:"/calendario",component:dt}),r.a.createElement(se,{exact:!0,path:"/tarefas",component:vt}),r.a.createElement(se,{exact:!0,path:"/aconcluir",component:jt}),r.a.createElement(qt,{exact:!0,path:"/admin",component:Pt}),r.a.createElement(se,{exact:!0,path:"/busca",component:St}),r.a.createElement(se,{exact:!0,path:"/incompativel",component:wt}),r.a.createElement(le.b,{exact:!0,path:"/login",component:zt}),r.a.createElement(le.b,{exact:!0,path:"/logout",component:Bt}),r.a.createElement(le.b,{exact:!0,path:"/loading",component:ie}),r.a.createElement(le.b,{component:me}))),r.a.createElement(ve,null))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Gt,null)),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.41929981.chunk.js.map